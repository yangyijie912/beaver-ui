.beaver-table__frame {
  position: relative;
}

/* 当容器可横向滚动时，动态显示两侧的渐变阴影以提示还有内容。 */
.beaver-table__frame.has-left-shadow::before,
.beaver-table__frame.has-right-shadow::after {
  content: '';
  position: absolute;
  top: 0;
  height: var(--beaver-table-scrollable-height, calc(100% - var(--beaver-table-scrollbar-height, 16px)));
  width: var(--beaver-table-shadow-width, 8px);
  pointer-events: none;
  z-index: calc(var(--beaver-table-z-index-header, 3000) - 1);
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* 固定表头时，用 clip-path 裁剪阴影，使其从表头下方开始 */
.beaver-table__frame--fixed-header.has-left-shadow::before,
.beaver-table__frame--fixed-header.has-right-shadow::after {
  clip-path: inset(var(--beaver-table-header-height, 0) 0 0 0);
}

.beaver-table__frame.has-left-shadow::before {
  left: var(--beaver-table-left-sticky-width, 0);
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.06) 0px, rgba(0, 0, 0, 0.02) 6px, transparent 100%);
}

.beaver-table__frame.has-right-shadow::after {
  right: calc(var(--beaver-table-right-sticky-width, 0) + var(--beaver-table-scrollbar-width, 0));
  background: linear-gradient(270deg, rgba(0, 0, 0, 0.06) 0px, rgba(0, 0, 0, 0.02) 6px, transparent 100%);
}

/* 固定表头 */
.beaver-table--fixed-header thead {
  position: relative;
  z-index: calc(var(--beaver-table-z-index-header, 3000) + 10);
}

.beaver-table--fixed-header thead th {
  position: sticky;
  top: 0;
  z-index: var(--beaver-table-z-index-header, 3000);
  background: var(--beaver-table-header-bg, #f8fafc);
  background-clip: border-box;
  color: var(--beaver-table-header-color);
}

/* 粘性列基础样式 */
.beaver-table thead .beaver-table__cell--sticky,
.beaver-table thead .beaver-table__cell--sticky--left,
.beaver-table thead .beaver-table__cell--sticky--right {
  background: var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody .beaver-table__cell--sticky,
.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  background: var(--beaver-table-fixed-bg, #fff);
  z-index: var(--beaver-table-z-index-sticky, 1000);
  background-clip: padding-box;
}

.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  z-index: 650;
}

/* 粘性边缘单元格 - 用 border-box 确保背景覆盖 border */
.beaver-table__cell--sticky-edge-left,
.beaver-table__cell--sticky-edge-right {
  z-index: 700;
  position: relative;
  background-clip: border-box;
}

.beaver-table--fixed-header thead .beaver-table__cell--sticky,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--left,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--right {
  z-index: calc(var(--beaver-table-z-index-header, 3000) + 50);
}

/* 非边缘粘性列的层级 */
.beaver-table
  tbody
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ),
.beaver-table
  tbody
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ) {
  z-index: 800;
}

.beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ),
.beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ) {
  background-color: inherit;
}

/* 行内粘性列背景 */
.beaver-table tbody tr:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr:hover .beaver-table__cell--sticky--right {
  background: var(--beaver-table-hover-bg);
}

.beaver-table tbody tr:hover .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col),
.beaver-table tbody tr:hover .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col) {
  background: var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--right {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--right {
  background: var(--beaver-table-hover-bg);
}

/* 右侧粘性列 1px 白色缝隙问题修复 */
.beaver-table thead th:last-child.beaver-table__cell--sticky--right {
  position: relative;
  z-index: var(--beaver-table-z-index-header, 3000);
  box-shadow: -1px 0 0 0 var(--beaver-table-header-bg, #f8fafc);
  background-clip: padding-box;
}

.beaver-table tbody td:last-child.beaver-table__cell--sticky--right {
  position: relative;
  z-index: var(--beaver-table-z-index-sticky, 2000);
  box-shadow: -1px 0 0 0 var(--beaver-table-fixed-bg, #fff);
  background-clip: padding-box;
}

.beaver-table tbody tr:hover td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody td:last-child.beaver-table__cell--sticky--right.box-shadow-wide {
  box-shadow: -2px 0 0 0 var(--beaver-table-fixed-bg, #fff);
}

.beaver-table thead th:last-child.beaver-table__cell--sticky--right.box-shadow-wide {
  box-shadow: -2px 0 0 0 var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody tr.beaver-table__row--selected:hover td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected:hover td:last-child.beaver-table__cell--sticky--right::before {
  background: var(--beaver-table-hover-bg);
}
