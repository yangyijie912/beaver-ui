/*
    表格外层容器：
    - 使用设计 tokens 提供的背景与圆角
    - 内部通过组件行内样式控制 overflow（避免创建独立滚动上下文，保证 sticky 生效）
  */
.beaver-table__wrap {
  background: var(--beaver-color-bg);
  border: 1px solid rgba(0, 0, 0, 0.06);
  border-radius: var(--beaver-radius-sm);
  overflow: visible;
}

.beaver-table {
  width: 100%;
  /* 使用 separate 避免在同时固定表头和固定列时 border-collapse 导致的 sticky 行为异常 */
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--beaver-font-size-md);
  color: var(--beaver-color-text);
}

/* 确保宽度包括 padding/border，这样列宽与单元格内容匹配 */
.beaver-table,
.beaver-table th,
.beaver-table td {
  box-sizing: border-box;
}

.beaver-table thead th {
  /* 表头单元格样式 */
  text-align: left;
  font-weight: 600;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.04);
  color: rgba(51, 51, 51, 0.7);
  font-size: 12px;
}

/* 固定表头 */
.beaver-table--fixed-header thead th {
  position: sticky;
  top: 0;
  z-index: var(--beaver-table-z-index-header, 3000); /* 使用变量以便外部统一调节 */
  background: var(--beaver-table-header-bg, #f8fafc);
  background-clip: padding-box; /* 防止阴影/边框被裁剪时出现视觉穿透 */
  /* 恢复原始视觉：轻微投影，而非边框 */
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.04);
  color: rgba(51, 51, 51, 0.85);
}

/* 防止内容在固定布局下溢出并重叠 */
.beaver-table thead th:not(.beaver-table__select-col),
.beaver-table tbody td:not(.beaver-table__select-col) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 选择列保留可见性与稳定宽度 */
.beaver-table__select-col {
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  width: 40px;
  background: var(--beaver-table-fixed-bg, #fff);
}

/* 即使不固定，也保持与表头/行一致的视觉 */
.beaver-table thead .beaver-table__select-col {
  background: var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody tr:hover .beaver-table__select-col {
  background: var(--beaver-table-row-hover-bg, rgba(0, 0, 0, 0.02));
}
.beaver-table tbody tr.beaver-table__row--selected .beaver-table__select-col {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}
/* 选中后再 hover，应以 hover 背景为准 */
.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__select-col {
  background: var(--beaver-table-row-hover-bg, rgba(0, 0, 0, 0.02));
}

/* header 背景色 */
.beaver-table thead {
  background: var(--beaver-table-header-bg, #f8fafc);
}

/* 复选框列宽与内边距 */
.beaver-table__select-col {
  width: 40px;
  padding: 8px 12px;
}

/* 固定列样式：为粘性列提供背景、分隔阴影与层级规则 */
.beaver-table thead .beaver-table__cell--sticky,
.beaver-table thead .beaver-table__cell--sticky--left,
.beaver-table thead .beaver-table__cell--sticky--right {
  background: var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody .beaver-table__cell--sticky,
.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  background: var(--beaver-table-fixed-bg, #fff);
  z-index: var(--beaver-table-z-index-sticky, 1000);
  background-clip: padding-box;
}

/* 细化层级：确保边缘粘性单元格覆盖内部相邻粘性单元格，但仍低于表头 */
.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  z-index: 650;
}

.beaver-table__cell--sticky-edge-left,
.beaver-table__cell--sticky-edge-right {
  z-index: 700; /* 更高以覆盖相邻粘性单元格的缝隙阴影 */
}

/* 表头粘性单元格应高于表体粘性单元格，避免被表体粘性列遮挡 */
.beaver-table--fixed-header thead .beaver-table__cell--sticky,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--left,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--right {
  z-index: calc(var(--beaver-table-z-index-header, 3000) + 50);
}

/* 边缘粘性单元格保持稍强的分隔效果 */
.beaver-table__cell--sticky-edge-left {
  position: relative;
  border-right: 1px solid rgba(0, 0, 0, 0.06);
}

/* 内侧左侧粘性单元格：在右边缘添加微妙的内阴影 */
.beaver-table tbody .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left) {
  border-right: 1px solid rgba(0, 0, 0, 0.04);
}

/* 内侧右侧粘性单元格：在左边缘添加微妙的内阴影 */
.beaver-table tbody .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-right) {
  border-left: 1px solid rgba(0, 0, 0, 0.04);
}

/* （已合并到上方） */

/* 注意：侧边覆盖的伪元素在下方单独定义，避免使用大的公共规则导致视觉错位。 */
.beaver-table__cell--sticky-edge-right {
  position: relative;
  border-left: 1px solid rgba(0, 0, 0, 0.06);
}

.beaver-table__th--left,
.beaver-table__td--left {
  text-align: left;
}

.beaver-table tbody td {
  padding: 14px 16px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.03);
  vertical-align: middle;
}

.beaver-table__row--selected {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}

/* 行 hover 效果 */
.beaver-table tbody tr:hover {
  background: var(--beaver-table-row-hover-bg, rgba(0, 0, 0, 0.02));
}

/* 使粘性列在行 hover 或选中时也能显式变化，保持一致性 */
.beaver-table tbody tr:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr:hover .beaver-table__cell--sticky--right {
  /* 粘性列在 hover 时使用 hover 背景 */
  background: var(--beaver-table-row-hover-bg, rgba(0, 0, 0, 0.02));
}
.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--right {
  /* 粘性列在选中时使用选中背景（更淡的蓝色） */
  background: var(--beaver-table-selected-bg, #f7fcfe);
}
/* 选中后再 hover 时，粘性列也切换为 hover 背景 */
.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--right {
  background: var(--beaver-table-row-hover-bg, rgba(0, 0, 0, 0.02));
}

/* 当表格处于可选择行模式时，使整行可点击的光标提示 */
.beaver-table__row--clickable {
  cursor: pointer;
}

.beaver-table__td {
  color: var(--beaver-color-text);
}
.beaver-table__td--right {
  padding-right: 20px;
}
