.beaver-table__frame {
  position: relative;
}

/* 当容器可横向滚动时，动态显示两侧的渐变阴影以提示还有内容。
   使用单层伪元素在 frame 上，用 height 变量精确限制高度以避免滚动条干扰。 */
.beaver-table__frame.has-left-shadow::before,
.beaver-table__frame.has-right-shadow::after {
  content: '';
  position: absolute;
  top: 0;
  height: var(--beaver-table-scrollable-height, calc(100% - var(--beaver-table-scrollbar-height, 16px)));
  /* 缩窄阴影宽度，减轻视觉占用 */
  width: 8px;
  pointer-events: none;
  z-index: calc(var(--beaver-table-z-index-header, 3000) - 1);
  will-change: transform, opacity;
  transform: translateZ(0);
}

/* 固定表头时，用 clip-path 裁剪阴影，使其从表头下方开始 */
.beaver-table__frame--fixed-header.has-left-shadow::before,
.beaver-table__frame--fixed-header.has-right-shadow::after {
  clip-path: inset(var(--beaver-table-header-height, 0) 0 0 0);
}

.beaver-table__frame.has-left-shadow::before {
  left: var(--beaver-table-left-sticky-width, 0);
  background: linear-gradient(90deg, rgba(0, 0, 0, 0.06) 0px, rgba(0, 0, 0, 0.02) 6px, transparent 100%);
}

.beaver-table__frame.has-right-shadow::after {
  right: calc(var(--beaver-table-right-sticky-width, 0) + var(--beaver-table-scrollbar-width, 0));
  background: linear-gradient(270deg, rgba(0, 0, 0, 0.06) 0px, rgba(0, 0, 0, 0.02) 6px, transparent 100%);
}

.beaver-table__wrap {
  background: var(--beaver-color-bg);
  border: 1px solid var(--beaver-table-border-color);
  border-radius: var(--beaver-radius-sm);
  overflow: visible;
}

.beaver-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  font-size: var(--beaver-font-size-md);
  color: var(--beaver-color-text);
}

.beaver-table,
.beaver-table th,
.beaver-table td {
  box-sizing: border-box;
}

.beaver-table thead th {
  text-align: left;
  font-weight: 600;
  padding: 12px 16px;
  border-bottom: 1px solid var(--beaver-table-border-color);
  color: var(--beaver-table-header-color);
  font-size: 12px;
}

/* 固定表头 */
.beaver-table--fixed-header thead {
  position: relative;
  z-index: calc(var(--beaver-table-z-index-header, 3000) + 10);
}

.beaver-table--fixed-header thead th {
  position: sticky;
  top: 0;
  z-index: var(--beaver-table-z-index-header, 3000);
  background: var(--beaver-table-header-bg, #f8fafc);
  background-clip: border-box;
  color: var(--beaver-table-header-color);
}

/* 防止内容在固定布局下溢出并重叠 */
.beaver-table thead th:not(.beaver-table__select-col),
.beaver-table tbody td:not(.beaver-table__select-col) {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 选择列 */
.beaver-table__select-col {
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  width: 40px;
  padding: 8px 12px;
  background: var(--beaver-table-fixed-bg, #fff);
}

.beaver-table thead .beaver-table__select-col {
  background: var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody tr:hover .beaver-table__select-col {
  background: var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected .beaver-table__select-col {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__select-col {
  background: var(--beaver-table-hover-bg);
}

.beaver-table thead {
  background: var(--beaver-table-header-bg, #f8fafc);
}

/* 复选框内容居中 */
.beaver-table__select-col.beaver-table__cell--sticky span,
.beaver-table__select-col.beaver-table__cell--sticky--left span {
  display: flex;
  width: 100%;
  align-items: center;
  justify-content: center;
}

.beaver-table__select-col.beaver-table__cell--sticky,
.beaver-table__select-col.beaver-table__cell--sticky--left {
  text-align: center;
}

.beaver-table__select-col.beaver-table__cell--sticky .beaver-checkbox,
.beaver-table__select-col.beaver-table__cell--sticky--left .beaver-checkbox {
  box-sizing: border-box;
  width: var(--checkbox-size, 16px);
  height: var(--checkbox-size, 16px);
  min-width: var(--checkbox-size, 16px);
  min-height: var(--checkbox-size, 16px);
  background: #fff;
  border-radius: var(--beaver-radius-sm);
  position: relative;
  z-index: 2;
}

/* 粘性列基础样式 */
.beaver-table thead .beaver-table__cell--sticky,
.beaver-table thead .beaver-table__cell--sticky--left,
.beaver-table thead .beaver-table__cell--sticky--right {
  background: var(--beaver-table-header-bg, #f8fafc);
}

.beaver-table tbody .beaver-table__cell--sticky,
.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  background: var(--beaver-table-fixed-bg, #fff);
  z-index: var(--beaver-table-z-index-sticky, 1000);
  background-clip: padding-box;
}

.beaver-table tbody .beaver-table__cell--sticky--left,
.beaver-table tbody .beaver-table__cell--sticky--right {
  z-index: 650;
}

/* 粘性边缘单元格 - 用 border-box 确保背景覆盖 border */
.beaver-table__cell--sticky-edge-left,
.beaver-table__cell--sticky-edge-right {
  z-index: 700;
  position: relative;
  background-clip: border-box;
}

.beaver-table--fixed-header thead .beaver-table__cell--sticky,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--left,
.beaver-table--fixed-header thead .beaver-table__cell--sticky--right {
  z-index: calc(var(--beaver-table-z-index-header, 3000) + 50);
}

/* 非边缘粘性列的层级 */
.beaver-table
  tbody
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ),
.beaver-table
  tbody
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ) {
  z-index: 800;
}

.beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ),
.beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-left):not(
    .beaver-table__cell--sticky-edge-right
  ) {
  background-color: inherit;
}

/* 行样式 */
.beaver-table tbody td {
  padding: 14px 16px;
  border-bottom: 1px solid var(--beaver-table-border-color);
  vertical-align: middle;
}

.beaver-table__row--selected {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody tr:hover {
  background: var(--beaver-table-hover-bg);
}

/* 空数据占位样式 */
.beaver-table__empty-cell {
  text-align: center;
  color: var(--beaver-table-empty-color, #6b7280);
  font-size: 14px;
  background: transparent; /* td 背景 透明，内层 box 为白色 */
  /* 使用变量控制最小高度，若变量不存在则回退到 auto（内容自适应） */
  min-height: var(--beaver-table-empty-height, auto);
  display: table-cell;
  vertical-align: middle;
  padding: 12px 16px;
}

/* 不应该对空占位行有 hover 高亮 */
.beaver-table tbody tr.beaver-table__empty-row:hover {
  background: transparent;
}

/* empty-inner/icon/text 的样式在下方已定义（避免重复） */

/* 行内粘性列背景 */
.beaver-table tbody tr:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr:hover .beaver-table__cell--sticky--right {
  background: var(--beaver-table-hover-bg);
}

.beaver-table tbody tr:hover .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col),
.beaver-table tbody tr:hover .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col) {
  background: var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected .beaver-table__cell--sticky--right {
  background: var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--left,
.beaver-table tbody tr.beaver-table__row--selected:hover .beaver-table__cell--sticky--right {
  background: var(--beaver-table-hover-bg);
}

/* 行为 */
.beaver-table__row--clickable {
  cursor: pointer;
}

.beaver-table__th--left,
.beaver-table__td--left {
  text-align: left;
}

.beaver-table__td {
  color: var(--beaver-color-text);
}

.beaver-table__td--right {
  padding-right: 20px;
}

/* ========== BORDERED 模式：列分隔线 ========== */

/* 普通列分隔线 */
.beaver-table__wrap--bordered .beaver-table thead th:not(:last-child),
.beaver-table__wrap--bordered .beaver-table tbody td:not(:last-child) {
  border-right: 1px solid var(--beaver-table-vertical-border-color, var(--beaver-table-border-color));
}

/* 非边缘粘性列的右侧分隔 */
.beaver-table__wrap--bordered
  .beaver-table
  tbody
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left),
.beaver-table__wrap--bordered
  .beaver-table
  thead
  .beaver-table__cell--sticky--left:not(.beaver-table__cell--sticky-edge-left) {
  border-right: 1px solid
    var(--beaver-table-sticky-border-color, var(--beaver-table-vertical-border-color, var(--beaver-table-border-color)));
}
.beaver-table__empty-inner {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

.beaver-table__empty-icon {
  color: var(--beaver-table-empty-icon-color, #dce0e6);
  flex: 0 0 auto;
}

.beaver-table__empty-text {
  color: var(--beaver-table-empty-color, #909399);
  font-size: 14px;
  margin-top: 4px;
}

/* 内层占位 box：设置视觉宽度、无边框并带轻微阴影，居中显示 */
.beaver-table__empty-box {
  background: var(--beaver-table-empty-bg, #ffffff);
  border-radius: 8px;
  padding: 18px 28px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: var(--beaver-table-empty-box-width, min(360px, 60%)); /* 可通过变量覆盖 */
}

/* 空占位的 inner/icon/text 样式在上方已定义（避免重复） */

/* 继续下面的 bordered 样式 */
.beaver-table__wrap--bordered .beaver-table thead th:not(:last-child),
.beaver-table__wrap--bordered .beaver-table tbody td:not(:last-child) {
  border-right: 1px solid var(--beaver-table-vertical-border-color, var(--beaver-table-border-color));
}

/* 非边缘粘性列的左侧分隔 */
.beaver-table__wrap--bordered
  .beaver-table
  tbody
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-right),
.beaver-table__wrap--bordered
  .beaver-table
  thead
  .beaver-table__cell--sticky--right:not(.beaver-table__cell--sticky-edge-right) {
  border-left: 1px solid
    var(--beaver-table-sticky-border-color, var(--beaver-table-vertical-border-color, var(--beaver-table-border-color)));
}

/* 粘性边缘列分隔线 - 仅在 bordered 模式 */
.beaver-table__wrap--bordered .beaver-table tbody .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col),
.beaver-table__wrap--bordered .beaver-table thead .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col) {
  border-right: 1px solid var(--beaver-table-border-color);
}

.beaver-table__wrap--bordered .beaver-table tbody .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col),
.beaver-table__wrap--bordered
  .beaver-table
  thead
  .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col) {
  border-left: 1px solid var(--beaver-table-border-color);
}

/* hover/selected 时保持分隔线 - 仅在 bordered 模式 */
.beaver-table__wrap--bordered
  .beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col),
.beaver-table__wrap--bordered
  .beaver-table
  tbody
  tr.beaver-table__row--selected
  .beaver-table__cell--sticky-edge-left:not(.beaver-table__select-col) {
  border-right: 1px solid var(--beaver-table-border-color);
}

.beaver-table__wrap--bordered
  .beaver-table
  tbody
  tr:hover
  .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col),
.beaver-table__wrap--bordered
  .beaver-table
  tbody
  tr.beaver-table__row--selected
  .beaver-table__cell--sticky-edge-right:not(.beaver-table__select-col) {
  border-left: 1px solid var(--beaver-table-border-color);
}

/* 去掉与粘性列相邻的普通列边框，避免双线 */
.beaver-table__wrap--bordered .beaver-table tbody td:has(+ .beaver-table__cell--sticky--left),
.beaver-table__wrap--bordered .beaver-table tbody td:has(+ .beaver-table__cell--sticky--right),
.beaver-table__wrap--bordered .beaver-table tbody td:has(+ .beaver-table__cell--sticky-edge-left),
.beaver-table__wrap--bordered .beaver-table tbody td:has(+ .beaver-table__cell--sticky-edge-right) {
  border-right: none;
}

.beaver-table__wrap--bordered .beaver-table thead th:has(+ .beaver-table__cell--sticky--left),
.beaver-table__wrap--bordered .beaver-table thead th:has(+ .beaver-table__cell--sticky--right),
.beaver-table__wrap--bordered .beaver-table thead th:has(+ .beaver-table__cell--sticky-edge-left),
.beaver-table__wrap--bordered .beaver-table thead th:has(+ .beaver-table__cell--sticky-edge-right) {
  border-right: none;
}

.beaver-table__wrap--bordered .beaver-table tbody .beaver-table__cell--sticky-edge-left + td {
  border-left: none;
}

.beaver-table__wrap--bordered .beaver-table thead .beaver-table__cell--sticky-edge-left + th {
  border-left: none;
}

/* 以下样式用来解决右侧粘性列1px白色缝隙问题 */

.beaver-table thead th:last-child.beaver-table__cell--sticky--right {
  position: relative;
  z-index: 2000;
  /* 使用表头背景色来遮盖缝隙，使线与表头融为一体 */
  box-shadow: -1px 0 0 0 var(--beaver-table-header-bg, #f8fafc);
  background-clip: padding-box;
}

.beaver-table tbody td:last-child.beaver-table__cell--sticky--right {
  position: relative;
  z-index: 2000;
  /* 使用表体固定背景色来遮盖缝隙，使线与表体融为一体 */
  box-shadow: -1px 0 0 0 var(--beaver-table-fixed-bg, #fff);
  background-clip: padding-box;
}

/* hover/selected 状态下让线的颜色跟随背景 */
.beaver-table tbody tr:hover td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-selected-bg, #f7fcfe);
}

.beaver-table tbody td:last-child.beaver-table__cell--sticky--right.box-shadow-wide {
  box-shadow: -2px 0 0 0 var(--beaver-table-fixed-bg, #fff);
}

.beaver-table thead th:last-child.beaver-table__cell--sticky--right.box-shadow-wide {
  box-shadow: -2px 0 0 0 var(--beaver-table-header-bg, #f8fafc);
}

/* 处理 hover 与 selected 同时发生的情况：优先使用 hover 颜色并隐藏可能的调试 ::before 颜色差
   说明：当行处于选中并且鼠标悬停时，两个状态会同时匹配，明确指定一个更靠后的选择器
   可以避免因为 cascade/order 导致显示不一致的竖线 */
.beaver-table tbody tr.beaver-table__row--selected:hover td:last-child.beaver-table__cell--sticky--right {
  box-shadow: -1px 0 0 0 var(--beaver-table-hover-bg);
}

.beaver-table tbody tr.beaver-table__row--selected:hover td:last-child.beaver-table__cell--sticky--right::before {
  background: var(--beaver-table-hover-bg);
}
