:root {
  /* ===== 尺寸定义 ===== */
  --beaver-checkbox-size: 16px; /* 复选框的标准尺寸，固定为16像素 */

  /* ===== 颜色定义：基础状态 ===== */
  --beaver-checkbox-border-color: var(--beaver-color-border, #aaa); /* 边框颜色：默认未选中状态 */
  --beaver-checkbox-checked-bg: var(--beaver-color-primary, #0eaae0); /* 背景颜色：选中和中间态共用 */
  --beaver-checkbox-text-color: var(--beaver-color-text, #333); /* 文字颜色：用于标签文本 */
  --beaver-checkbox-disabled-bg: #f3f4f6; /* 禁用时的背景色：浅灰色，使其看起来不可交互 */
  --beaver-checkbox-disabled-border: #e5e7eb; /* 禁用时的边框色：与背景接近但略深 */
  --beaver-checkbox-disabled-text: var(--beaver-color-disabled, #9ca3af); /* 禁用时的文字色：降低对比度 */

  /* ===== 颜色定义：交互状态 ===== */
  /* Hover 和 Focus 时的边框色：使用原色的聚焦色 */
  --beaver-checkbox-border-color-hover: rgb(var(--beaver-color-primary-rgb, 14 170 224) / 0.8);
  /* Focus 时的外环颜色：使用原色的半透明效果 */
  --beaver-checkbox-focus-ring-color: rgb(var(--beaver-color-primary-rgb, 14 170 224) / 0.2);

  /* ===== 间距定义 ===== */
  --beaver-checkbox-gap: var(--beaver-space-sm, 8px); /* Checkbox 与标签文本之间的间距 */
  --beaver-checkbox-focus-ring-width: 4px; /* Focus ring 的宽度：聚焦时的外环大小 */

  /* ===== 中间态样式 ===== */
  --beaver-checkbox-indeterminate-scale: 0.5; /* 中间态小方块占 Checkbox 的比例：50% 表示正好是一半 */
  --beaver-checkbox-indeterminate-radius: 0px; /* 中间态小方块的圆角：为 0，保持方形 */

  /* ===== 动画配置 ===== */
  --beaver-checkbox-transition-duration: 120ms; /* 所有过渡的时间 */
  --beaver-checkbox-transition-timing: ease; /* 过渡的缓动函数 */

  /* ===== 圆角配置 ===== */
  --beaver-checkbox-border-radius: 4px; /* Checkbox 和中间态小方块的圆角 */
}

/* ===== 尺寸类：通过 wrapper 类设置控件尺寸与标签字体 ===== */
.beaver-checkbox-wrapper--small {
  --beaver-checkbox-size: 14px;
  --beaver-checkbox-font-size: var(--beaver-font-size-sm, 12px);
}

.beaver-checkbox-wrapper--medium {
  --beaver-checkbox-size: 16px;
  --beaver-checkbox-font-size: var(--beaver-font-size-md, 14px);
}

.beaver-checkbox-wrapper--large {
  --beaver-checkbox-size: 18px;
  --beaver-checkbox-font-size: var(--beaver-font-size-lg, 16px);
}

/* ===== 隐藏原生输入框 ===== */
/* 隐藏原生输入框但保持其可聚焦；使用相邻的 span（.beaver-checkbox）作为视觉元素
   通过 opacity: 0 而不是 display: none 来保持其在文档流中的尺寸，以支持键盘交互
*/
.beaver-checkbox-input {
  position: absolute;
  top: 0;
  left: 0;
  width: var(--beaver-checkbox-size);
  height: var(--beaver-checkbox-size);
  margin: 0;
  padding: 0;
  opacity: 0;
  cursor: pointer;
  z-index: 2;
}

/* ===== 自定义 Checkbox 外观 ===== */
.beaver-checkbox {
  /* 基础布局 */
  box-sizing: border-box;
  display: inline-block;
  width: var(--beaver-checkbox-size);
  height: var(--beaver-checkbox-size);
  position: relative;
  z-index: 1;

  /* 视觉样式：边框和背景 */
  border: 1px solid var(--beaver-checkbox-border-color);
  border-radius: var(--beaver-checkbox-border-radius);
  background: #fff;

  /* 交互反馈 */
  cursor: pointer;
  vertical-align: middle;
  transition:
    border-color var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing),
    background-color var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing),
    box-shadow var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing);
}

/* ===== 勾选标记（SVG）===== */
/* 使用 ::after 伪元素绘制白色勾选符号 */
.beaver-checkbox::after {
  content: '';
  position: absolute;
  inset: 0;
  display: block;
  background-repeat: no-repeat;
  background-position: center;
  background-size: 72% 72%;

  /* 默认隐藏，选中时显示 */
  opacity: 0;
  transform: scale(0);
  transition:
    transform var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing),
    opacity var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing);
  pointer-events: none;

  /* SVG 路径 */
  background-image: url('../../assets/icons/check.svg');
}

/* 选中时显示勾选标记 */
.beaver-checkbox-input:checked + .beaver-checkbox::after {
  opacity: 1;
  transform: scale(1);
}

/* ===== 中间态样式 ===== */
/* 使用 ::before 伪元素绘制中间态的小方块 */
.beaver-checkbox::before {
  content: '';
  position: absolute;
  width: calc(var(--beaver-checkbox-size) * var(--beaver-checkbox-indeterminate-scale));
  height: calc(var(--beaver-checkbox-size) * var(--beaver-checkbox-indeterminate-scale));
  background: var(--beaver-checkbox-checked-bg);
  left: 50%;
  top: 50%;
  border-radius: var(--beaver-checkbox-indeterminate-radius);

  /* 默认隐藏 */
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.6);
  transition:
    transform var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing),
    opacity var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing),
    background-color var(--beaver-checkbox-transition-duration) var(--beaver-checkbox-transition-timing);
  pointer-events: none;
}

/* 中间态显示小方块：在 data-indeterminate 属性或 --indeterminate 类时触发 */
.beaver-checkbox-wrapper input.beaver-checkbox-input[data-indeterminate='true'] + .beaver-checkbox::before,
.beaver-checkbox-wrapper .beaver-checkbox--indeterminate::before {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* 当复选框同时被选中时，隐藏中间态的小方块（原生选中状态优先） */
.beaver-checkbox-wrapper input.beaver-checkbox-input:checked + .beaver-checkbox::before {
  opacity: 0;
  transform: translate(-50%, -50%) scale(0.6);
}

/* ===== 选中状态 ===== */
.beaver-checkbox-input:checked + .beaver-checkbox {
  /* 变更背景色和边框色为原色 */
  background: var(--beaver-checkbox-checked-bg);
  border-color: var(--beaver-checkbox-checked-bg);
}

/* ===== Hover 状态 ===== */
/* 未禁用时的 Hover 效果：边框颜色加深，提供视觉反馈 */
.beaver-checkbox-input:not(:disabled):hover + .beaver-checkbox,
.beaver-checkbox:not(:disabled):hover {
  border-color: var(--beaver-checkbox-border-color-hover);
}

/* ===== Focus 状态（键盘导航和手动聚焦）===== */
.beaver-checkbox-input:focus-visible + .beaver-checkbox {
  /* 添加外环阴影表示获得焦点 */
  box-shadow: 0 0 0 var(--beaver-checkbox-focus-ring-width) var(--beaver-checkbox-focus-ring-color);
  border-color: var(--beaver-checkbox-border-color-hover);
}

/* ===== 标签文本样式 ===== */
/* Checkbox 后紧跟的文本 span */
.beaver-checkbox-wrapper .beaver-checkbox + span {
  line-height: 1;
  vertical-align: middle;
  color: var(--beaver-checkbox-text-color);
  font-size: var(--beaver-checkbox-font-size, inherit);
}

/* ===== 禁用状态 ===== */
/* 禁用时的 Checkbox 外观：灰色背景和边框，不可交互
   扩展匹配：
   - 隐藏原生输入禁用：`.beaver-checkbox-input:disabled`
   - 视觉元素属性禁用：`[disabled]` / `[aria-disabled="true"]`
   - 包含在 fieldset:disabled 中的控件
*/
.beaver-checkbox-input:disabled {
  cursor: not-allowed;
}

.beaver-checkbox-input:disabled + .beaver-checkbox,
.beaver-checkbox[disabled],
.beaver-checkbox[aria-disabled='true'],
.beaver-checkbox-wrapper--disabled .beaver-checkbox,
.beaver-checkbox--disabled,
fieldset:disabled .beaver-checkbox,
fieldset[disabled] .beaver-checkbox {
  background: var(--beaver-checkbox-disabled-bg);
  border-color: var(--beaver-checkbox-disabled-border);
  cursor: not-allowed;
  pointer-events: none;
  opacity: 0.9;
}

/* 禁用时的标签文本：变灰并不可交互 */
label input[disabled] + .beaver-checkbox + span,
.beaver-checkbox-wrapper input[disabled] + .beaver-checkbox + span,
.beaver-checkbox-wrapper--disabled .beaver-checkbox + span,
fieldset:disabled .beaver-checkbox + span,
fieldset[disabled] .beaver-checkbox + span {
  color: var(--beaver-checkbox-disabled-text);
  cursor: not-allowed;
}

/* 在disabled 属性生效下 wrapper 整体呈现禁用样式 */
.beaver-checkbox-wrapper[disabled],
.beaver-checkbox-wrapper[aria-disabled='true'],
.beaver-checkbox-wrapper--disabled,
fieldset:disabled .beaver-checkbox-wrapper,
fieldset[disabled] .beaver-checkbox-wrapper {
  cursor: not-allowed;
}

/* ===== Wrapper 容器样式 ===== */
/* Checkbox 与标签的整体容器：使用 inline-flex 保持在行内，垂直居中对齐 */
.beaver-checkbox-wrapper {
  display: inline-flex;
  align-items: center;
  gap: var(--beaver-checkbox-gap);
  position: relative;
}
