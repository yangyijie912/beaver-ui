import{j as t}from"./jsx-runtime-u17CrQMm.js";import{r as k,R as le}from"./iframe-C2GNDxh_.js";import{C as je}from"./Checkbox-CBS7w8v0.js";import"./preload-helper-PPVm8Dsz.js";const qe=({text:r="暂无数据",className:c,boxWidth:b})=>t.jsx("div",{className:`beaver-table__empty-inner ${c??""}`,role:"status","aria-live":"polite",children:t.jsxs("div",{className:"beaver-table__empty-box",style:b?{width:b}:void 0,"aria-hidden":typeof r=="string"?"false":"true",children:[t.jsxs("svg",{className:"beaver-table__empty-icon",width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M3 7.5L12 3l9 4.5v9L12 21 3 16.5v-9z",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),t.jsx("path",{d:"M12 3v18",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.6"})]}),t.jsx("div",{className:"beaver-table__empty-text",children:r})]})});qe.__docgenInfo={description:"",methods:[],displayName:"Empty",props:{text:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"",defaultValue:{value:"'暂无数据'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},boxWidth:{required:!1,tsType:{name:"string"},description:""}}};const x=({columns:r,data:c,rowKey:b="id",defaultAlign:f="left",showCheckbox:p=!1,selectedKeys:j,onSelectionChange:F,renderCell:me,preservePxAsMin:pe=!0,minColumnPx:N=80,fixedHeader:q=!1,headerOffset:he=0,maxHeight:B,fixedColumnCount:Ee=0,fixedRightCount:Me=0,border:fe=!1,empty:Ae,emptyText:De})=>{const[ye,oe]=k.useState({}),I=Array.isArray(j),$=k.useRef(null),[h,be]=k.useState(null),[Ie,ge]=k.useState(!1),[$e,we]=k.useState(!1),[Fe,xe]=k.useState(!1),[ve,ke]=k.useState(0),[Be,Se]=k.useState(0),[Oe,O]=k.useState(0);k.useLayoutEffect(()=>{const e=$.current;if(!e)return;be(e.clientWidth||null);const n=new ResizeObserver(()=>{be(e.clientWidth||null)});return n.observe(e),()=>n.disconnect()},[]);const L=k.useMemo(()=>{if(I){const e={};return j.forEach(n=>e[n]=!0),e}return ye},[I,j,ye]),ie=e=>{const n=Object.keys(e).filter(s=>e[s]);F?.(n)},_e=(e,n)=>{if(I){const s=new Set(j),m=s.has(e),o=new Set(s);typeof n=="boolean"?n?o.add(e):o.delete(e):m?o.delete(e):o.add(e);const i=Array.from(o);F?.(i);return}oe(s=>{const m=typeof n=="boolean"?{...s,[e]:n}:{...s,[e]:!s[e]};return ie(m),m})},Le=e=>{if(e){const n={};c.forEach((s,m)=>{const o=String(s[b]??m);n[o]=!0}),I?F?.(Object.keys(n)):(oe(n),ie(n));return}I?F?.([]):(oe({}),ie({}))},Pe=c.length,He=Object.keys(L).reduce((e,n)=>L[n]?e+1:e,0),Ne=Pe>0&&c.every((e,n)=>!!L[String(e[b]??n)]),Ve=He>0&&!Ne,Re=r.some(e=>!!e.width),W=le.useMemo(()=>{const e=typeof N=="number"&&N>0?N:80,n=r.map(y=>{const d=y.width?.trim();if(d&&d.endsWith("%")){const v=parseFloat(d.slice(0,-1));if(!Number.isNaN(v))return{key:y.key,raw:d,kind:"percent",value:v}}return{key:y.key,raw:d??void 0,kind:"other"}}),s=n.reduce((y,d)=>y+(d.kind==="percent"&&d.value?d.value:0),0),m=n.filter(y=>y.kind==="other"&&!y.raw).length,o=h&&h>0?m*e*100/h:m*3,i=Math.max(0,100-o);let l;if(s>0&&s>i){const y=i/s;l=n.map(d=>d.kind==="percent"&&d.value?{key:d.key,width:`${(d.value*y).toFixed(4).replace(/\.0+$/,"")}%`}:{key:d.key,width:d.raw})}else l=n.map(y=>({key:y.key,width:y.raw}));let a=0,_=!1,u=0;if(l.forEach(y=>{const d=y.width;if(!d){a+=e;return}const v=d.trim();if(v.endsWith("px")){const T=parseFloat(v.slice(0,-2));if(!Number.isNaN(T)){_=!0,a+=T,u+=T;return}}if(v.endsWith("%")){const T=parseFloat(v.slice(0,-1));if(!Number.isNaN(T)&&h&&h>0){a+=T/100*h;return}}a+=e}),p&&(a+=40,u+=40),pe&&h&&h>0&&u>0)return u>h?{cols:l,needsHScroll:!0,tableWidth:Math.ceil(a)+"px"}:{cols:l,needsHScroll:!1,tableWidth:void 0};const D=!!(h&&a>h&&_),g=D?Math.ceil(a)+"px":void 0;return{cols:l,needsHScroll:D,tableWidth:g}},[r,h,p,pe,N]),de=r.length;let E=Math.max(0,Math.min(Ee,de)),M=Math.max(0,Math.min(Me,de));E+M>=de&&(console.warn("[Beaver-UI-Table] fixedColumnCount + fixedRightCount >= columns.length — disabling fixed columns to avoid overlap"),E=0,M=0),k.useEffect(()=>{const e=$.current;if(!e)return;let n=0;const s=()=>{cancelAnimationFrame(n),n=requestAnimationFrame(()=>{const i=e.scrollLeft||0,l=Math.max(0,e.scrollWidth-e.clientWidth);ge(w>0&&i>0),we(R>0&&i<l-1);const a=w>0||R>0,_=i>0&&i<l-1;xe(!q&&a&&_);const u=Math.max(0,e.offsetHeight-e.clientHeight);ke(u);const D=Math.max(0,e.offsetWidth-e.clientWidth);Se(D);try{const g=e.querySelector("table"),y=g?g.querySelector("thead"):null,d=q&&y?y.offsetHeight:0;O(d)}catch{O(0)}})},m=Math.max(0,e.scrollWidth-e.clientWidth);ge(!1),we(R>0&&m>1),xe(!1),ke(Math.max(0,e.offsetHeight-e.clientHeight)),Se(Math.max(0,e.offsetWidth-e.clientWidth));try{const i=e.querySelector("table"),l=i?i.querySelector("thead"):null,a=q&&l?l.offsetHeight:0;O(a)}catch{O(0)}e.addEventListener("scroll",s,{passive:!0});const o=new ResizeObserver(()=>{s()});return o.observe(e),()=>{e.removeEventListener("scroll",s),o.disconnect(),cancelAnimationFrame(n)}},[h,W.tableWidth,E,M]);const P=le.useMemo(()=>{const e=typeof N=="number"&&N>0?N:80,n=r.map(l=>{const a=W.cols.find(u=>u.key===l.key)?.width||l.width;if(!a)return e;const _=String(a).trim();if(_.endsWith("px")){const u=parseFloat(_.slice(0,-2));return Number.isNaN(u)?e:u}if(_.endsWith("%")&&h&&h>0){const u=parseFloat(_.slice(0,-1));return Number.isNaN(u)?e:u/100*h}return e}),s=p?40:0,m=new Array(r.length).fill(0);let o=s;for(let l=0;l<r.length;l++)m[l]=o,o+=n[l];const i=new Array(r.length).fill(0);o=0;for(let l=r.length-1;l>=0;l--)i[l]=o,o+=n[l];return{leftOffsets:m,rightOffsets:i}},[r,W,h,p,N]),{leftStickyWidth:H,rightStickyWidth:V}=le.useMemo(()=>{const e=typeof N=="number"&&N>0?N:80,n=o=>{const i=W.cols.find(a=>a.key===o.key)?.width||o.width;if(!i)return e;const l=String(i).trim();if(l.endsWith("px")){const a=parseFloat(l.slice(0,-2));return Number.isNaN(a)?e:a}if(l.endsWith("%")&&h&&h>0){const a=parseFloat(l.slice(0,-1));return Number.isNaN(a)?e:a/100*h}return e};let s=0;p&&(s+=40);for(let o=0;o<Math.max(0,E);o++){const i=r[o];if(!i)break;s+=n(i)}let m=0;for(let o=r.length-1;o>=r.length-M;o--){const i=r[o];if(!i)break;m+=n(i)}return{leftStickyWidth:Math.ceil(s),rightStickyWidth:Math.ceil(m)}},[r,W,h,p,E,M,N]),[w,ce]=k.useState(E),[R,ue]=k.useState(M);return k.useEffect(()=>{const e=h??($.current?$.current.clientWidth:null);if(e==null){ce(E),ue(M);return}H+V>=e?(w===0&&R===0||console.warn(`[Beaver-UI-Table] fixed columns disabled: leftStickyWidth(${H}) + rightStickyWidth(${V}) >= containerWidth(${e})`),ce(0),ue(0)):(ce(E),ue(M))},[h,H,V,E,M]),t.jsx("div",{className:`beaver-table__frame ${Ie?"has-left-shadow":""} ${$e?"has-right-shadow":""} ${q?"beaver-table__frame--fixed-header":""}`,style:{"--beaver-table-left-sticky-width":`${H}px`,"--beaver-table-right-sticky-width":`${V}px`,"--beaver-table-scrollbar-height":`${ve}px`,"--beaver-table-scrollbar-width":`${Be}px`,"--beaver-table-header-height":`${Oe}px`,"--beaver-table-scrollable-height":`calc(100% - ${ve}px)`},children:t.jsx("div",{className:`beaver-table__wrap ${fe?"beaver-table__wrap--bordered":""}`,ref:$,style:{overflowX:W.needsHScroll?"auto":void 0,overflowY:q?"auto":void 0,paddingBottom:q?12:void 0,maxHeight:q&&B!=null?typeof B=="number"?`${B}px`:B:void 0},children:t.jsxs("table",{className:`beaver-table ${q?"beaver-table--fixed-header":""} ${fe?"beaver-table--bordered":""} ${Fe?"beaver-table--column-edge-shadow":""}`,style:{tableLayout:Re?"fixed":"auto",width:W.tableWidth},children:[Re?t.jsxs("colgroup",{children:[p?t.jsx("col",{style:{width:"40px"}},"__select_col__"):null,r.map(e=>{const n=W.cols.find(s=>s.key===e.key)?.width;return t.jsx("col",{style:n?{width:n}:void 0},e.key)})]}):null,t.jsx("thead",{children:t.jsxs("tr",{children:[p?t.jsx("th",{className:`beaver-table__select-col ${w>0?"beaver-table__cell--sticky beaver-table__cell--sticky--left beaver-table__cell--sticky-edge-left":""}`,style:q?{position:"sticky",top:he,...w>0?{left:0}:{}}:w>0?{position:"sticky",left:0}:void 0,children:t.jsx("span",{onClick:e=>e.stopPropagation(),children:t.jsx(je,{"aria-label":"select-all",checked:Ne,indeterminate:Ve,onChange:e=>Le(e.target.checked)})})}):null,r.map((e,n)=>{const s=e.align??f??"left",m=W.cols.find(_=>_.key===e.key)?.width,o=w>0&&n<w,i=R>0&&n>=r.length-R,l={},a=[];return o&&(l.position="sticky",l.left=P.leftOffsets[n],a.push("beaver-table__cell--sticky","beaver-table__cell--sticky--left"),n===w-1&&a.push("beaver-table__cell--sticky-edge-left")),i&&(l.position="sticky",l.right=P.rightOffsets[n],a.push("beaver-table__cell--sticky","beaver-table__cell--sticky--right"),n===r.length-R&&a.push("beaver-table__cell--sticky-edge-right")),t.jsx("th",{style:{width:m??e.width,textAlign:s,...q?{top:he}:{},...l},className:`beaver-table__th beaver-table__th--${s} ${a.join(" ")}`,children:e.title},e.key)})]})}),t.jsx("tbody",{children:(()=>{const e={};if(!c||c.length===0){const n=r.length+(p?1:0),s=Ae??t.jsx(qe,{text:De??"暂无数据"});return[t.jsx("tr",{className:"beaver-table__empty-row",children:t.jsx("td",{className:"beaver-table__empty-cell",colSpan:n,children:s})},"__empty__")]}return c.map((n,s)=>{const m=String(n[b]??s),o=!!L[m],i=[o?"beaver-table__row--selected":"",p?"beaver-table__row--clickable":""].filter(Boolean).join(" "),l=[];p&&l.push(t.jsx("td",{className:`beaver-table__select-col ${w>0?"beaver-table__cell--sticky beaver-table__cell--sticky--left beaver-table__cell--sticky-edge-left":""}`,style:w>0?{position:"sticky",left:0}:void 0,children:t.jsx("span",{onClick:a=>a.stopPropagation(),children:t.jsx(je,{checked:o,onChange:a=>_e(m,a.target.checked)})})},`__select_${m}`));for(let a=0;a<r.length;a++){const _=`${s}-${a}`;if(e[_])continue;const u=r[a],D=u.align??f??"left";let g=n[u.key],y=g,d=1,v=1;if(g&&typeof g=="object"&&("colSpan"in g||"rowSpan"in g||"value"in g)&&("value"in g&&(y=g.value),"colSpan"in g&&(d=Math.max(1,Number(g.colSpan)||1)),"rowSpan"in g&&(v=Math.max(1,Number(g.rowSpan)||1))),typeof u.span=="function")try{const C=u.span(n,s,u);C&&(C.colSpan!=null&&(d=Math.max(1,Number(C.colSpan)||1)),C.rowSpan!=null&&(v=Math.max(1,Number(C.rowSpan)||1)))}catch{}d=Math.min(d,r.length-a),v=Math.min(v,c.length-s);for(let C=s;C<s+v;C++)for(let K=a;K<a+d;K++){const Ke=`${C}-${K}`;C===s&&K===a||(e[Ke]=!0)}const T=typeof u.render=="function"?u.render(y,n,s,u):void 0,Ce=T==null&&typeof me=="function"?me(n,u,s):void 0;l.push(t.jsx("td",{className:`beaver-table__td beaver-table__td--${D} ${w>0&&a<w?"beaver-table__cell--sticky beaver-table__cell--sticky--left"+(a===w-1?" beaver-table__cell--sticky-edge-left":""):R>0&&a>=r.length-R?"beaver-table__cell--sticky beaver-table__cell--sticky--right"+(a===r.length-R?" beaver-table__cell--sticky-edge-right":""):""}`,style:{textAlign:D,...w>0&&a<w?{position:"sticky",left:P.leftOffsets[a]}:{},...R>0&&a>=r.length-R?{position:"sticky",right:P.rightOffsets[a]}:{}},...d>1?{colSpan:d}:{},...v>1?{rowSpan:v}:{},children:T??Ce??y},`${u.key}_${a}`))}return t.jsx("tr",{className:i,onClick:a=>{a.target.closest("input,button,a,textarea,select,.beaver-checkbox,.beaver-checkbox-wrapper,.beaver-checkbox-input")||p&&_e(m,!o)},children:l},m)})})()})]})})})};x.__docgenInfo={description:"",methods:[],displayName:"Table",props:{columns:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string;
  title: string;
  width?: string;
  align?: 'left' | 'center' | 'right';
  /** 可选的列级渲染器：接收当前单元格值、整行数据、行索引和列定义，返回自定义渲染内容 */
  render?: (value: any, row: Row, rowIndex: number, column: Column) => React.ReactNode | null | undefined;
  /** 可选的单元格合并函数：返回当前单元格的 colSpan / rowSpan */
  span?: (row: Row, rowIndex: number, column: Column) => { colSpan?: number; rowSpan?: number } | undefined;
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"align",value:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}],required:!1}},{key:"render",value:{name:"signature",type:"function",raw:"(value: any, row: Row, rowIndex: number, column: Column) => React.ReactNode | null | undefined",signature:{arguments:[{type:{name:"any"},name:"value"},{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"row"},{type:{name:"number"},name:"rowIndex"},{type:{name:"Column"},name:"column"}],return:{name:"union",raw:"React.ReactNode | null | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"null"},{name:"undefined"}]}},required:!1},description:"可选的列级渲染器：接收当前单元格值、整行数据、行索引和列定义，返回自定义渲染内容"},{key:"span",value:{name:"signature",type:"function",raw:"(row: Row, rowIndex: number, column: Column) => { colSpan?: number; rowSpan?: number } | undefined",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"row"},{type:{name:"number"},name:"rowIndex"},{type:{name:"Column"},name:"column"}],return:{name:"union",raw:"{ colSpan?: number; rowSpan?: number } | undefined",elements:[{name:"signature",type:"object",raw:"{ colSpan?: number; rowSpan?: number }",signature:{properties:[{key:"colSpan",value:{name:"number",required:!1}},{key:"rowSpan",value:{name:"number",required:!1}}]}},{name:"undefined"}]}},required:!1},description:"可选的单元格合并函数：返回当前单元格的 colSpan / rowSpan"}]}}],raw:"Column[]"},description:"列定义"},data:{required:!0,tsType:{name:"Array",elements:[{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"}],raw:"Row[]"},description:"行数据"},rowKey:{required:!1,tsType:{name:"string"},description:"行唯一标识字段",defaultValue:{value:"'id'",computed:!1}},defaultAlign:{required:!1,tsType:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}]},description:"默认列对齐方式，列自身未配置 align 时使用",defaultValue:{value:"'left'",computed:!1}},showCheckbox:{required:!1,tsType:{name:"boolean"},description:"是否展示行前的复选框（默认 false）",defaultValue:{value:"false",computed:!1}},selectedKeys:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"受控选中 keys（可选）"},onSelectionChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(keys: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"keys"}],return:{name:"void"}}},description:"选中变化回调（受控或非受控时都会触发）"},renderCell:{required:!1,tsType:{name:"signature",type:"function",raw:"(row: Row, column: Column, rowIndex: number) => React.ReactNode | null | undefined",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"row"},{type:{name:"signature",type:"object",raw:`{
  key: string;
  title: string;
  width?: string;
  align?: 'left' | 'center' | 'right';
  /** 可选的列级渲染器：接收当前单元格值、整行数据、行索引和列定义，返回自定义渲染内容 */
  render?: (value: any, row: Row, rowIndex: number, column: Column) => React.ReactNode | null | undefined;
  /** 可选的单元格合并函数：返回当前单元格的 colSpan / rowSpan */
  span?: (row: Row, rowIndex: number, column: Column) => { colSpan?: number; rowSpan?: number } | undefined;
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"width",value:{name:"string",required:!1}},{key:"align",value:{name:"union",raw:"'left' | 'center' | 'right'",elements:[{name:"literal",value:"'left'"},{name:"literal",value:"'center'"},{name:"literal",value:"'right'"}],required:!1}},{key:"render",value:{name:"signature",type:"function",raw:"(value: any, row: Row, rowIndex: number, column: Column) => React.ReactNode | null | undefined",signature:{arguments:[{type:{name:"any"},name:"value"},{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"row"},{type:{name:"number"},name:"rowIndex"},{type:{name:"Column"},name:"column"}],return:{name:"union",raw:"React.ReactNode | null | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"null"},{name:"undefined"}]}},required:!1},description:"可选的列级渲染器：接收当前单元格值、整行数据、行索引和列定义，返回自定义渲染内容"},{key:"span",value:{name:"signature",type:"function",raw:"(row: Row, rowIndex: number, column: Column) => { colSpan?: number; rowSpan?: number } | undefined",signature:{arguments:[{type:{name:"Record",elements:[{name:"string"},{name:"any"}],raw:"Record<string, any>"},name:"row"},{type:{name:"number"},name:"rowIndex"},{type:{name:"Column"},name:"column"}],return:{name:"union",raw:"{ colSpan?: number; rowSpan?: number } | undefined",elements:[{name:"signature",type:"object",raw:"{ colSpan?: number; rowSpan?: number }",signature:{properties:[{key:"colSpan",value:{name:"number",required:!1}},{key:"rowSpan",value:{name:"number",required:!1}}]}},{name:"undefined"}]}},required:!1},description:"可选的单元格合并函数：返回当前单元格的 colSpan / rowSpan"}]}},name:"column"},{type:{name:"number"},name:"rowIndex"}],return:{name:"union",raw:"React.ReactNode | null | undefined",elements:[{name:"ReactReactNode",raw:"React.ReactNode"},{name:"null"},{name:"undefined"}]}}},description:"可选的单元格渲染器：如果返回非 null/undefined，则使用其结果作为单元格内容"},preservePxAsMin:{required:!1,tsType:{name:"boolean"},description:`当混合使用 px 与 百分比/未设置宽度时，是否保证 px 列的最小宽度，且尽量避免滚动（默认 true）。
为 true 时，只有当 px 列总宽超过容器时才触发横向滚动，否则 px 列作为最小宽保留，百分比列保持弹性分配。
为 false 时，则按常规逻辑：只要包含 px 列且总宽超出容器就触发横向滚动。`,defaultValue:{value:"true",computed:!1}},minColumnPx:{required:!1,tsType:{name:"number"},description:"未指定或无法换算宽度时的保守最小像素（默认 80）",defaultValue:{value:"80",computed:!1}},fixedHeader:{required:!1,tsType:{name:"boolean"},description:"是否固定表头，默认 false",defaultValue:{value:"false",computed:!1}},headerOffset:{required:!1,tsType:{name:"number"},description:"表头距离容器顶部的偏移（例如有上方工具栏时），默认 0",defaultValue:{value:"0",computed:!1}},maxHeight:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"表格容器最大高度，设置后启用纵向滚动以配合粘性表头。示例：300 或 '50vh'"},fixedColumnCount:{required:!1,tsType:{name:"number"},description:`固定左侧的列数量（不含复选框列），默认 0。
注意：固定列数量之和要小于总列数，否则为了避免重叠，超出时会自动禁用固定列；
且当固定列宽度之和超过容器宽度时也会自动禁用固定列并打印警告。`,defaultValue:{value:"0",computed:!1}},fixedRightCount:{required:!1,tsType:{name:"number"},description:`固定右侧的列数量，默认 0。
注意：固定列数量之和要小于总列数，否则为了避免重叠，超出时会自动禁用固定列；
且当固定列宽度之和超过容器宽度时也会自动禁用固定列并打印警告。`,defaultValue:{value:"0",computed:!1}},border:{required:!1,tsType:{name:"boolean"},description:"是否展示边框线，默认不展示",defaultValue:{value:"false",computed:!1}},empty:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义空状态：优先使用该 prop（ReactNode）"},emptyText:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"空状态默认文案（当未提供 `empty` 时使用）"}}};const yt={title:"Components/Table",component:x,argTypes:{columns:{table:{disable:!0}},data:{table:{disable:!0}},rowKey:{table:{disable:!0}},renderCell:{table:{disable:!0}},onSelectionChange:{table:{disable:!0}},selectedKeys:{table:{disable:!0}},showCheckbox:{control:"boolean"},preservePxAsMin:{control:"boolean"},minColumnPx:{control:"number"},fixedHeader:{control:"boolean"},fixedColumnCount:{control:"number"},fixedRightCount:{control:"number"}}},A=[{key:"unique_id",title:"ID编号"},{key:"orderNumber",title:"订单号"},{key:"quantityOrdered",title:"订购数量"},{key:"priceEach",title:"单价"},{key:"orderGoods",title:"订单货物"},{key:"sales",title:"销售额"},{key:"orderDate",title:"订单日期"},{key:"statusName",title:"状态"}],Ge=[{key:"unique_id",title:"ID编号"},{key:"orderNumber",title:"订单号"},{key:"quantityOrdered",title:"订购数量",align:"center"},{key:"priceEach",title:"单价",align:"right"},{key:"orderGoods",title:"订单货物",align:"center"},{key:"sales",title:"销售额",align:"right"},{key:"orderDate",title:"订单日期",align:"center"},{key:"statusName",title:"状态",align:"center"}],Te=[{key:"unique_id",title:"ID编号",width:"100px"},{key:"orderNumber",title:"订单号",width:"100px"},{key:"quantityOrdered",title:"订购数量",width:"100px"},{key:"priceEach",title:"单价",width:"100px"},{key:"orderGoods",title:"订单货物",width:"700px"},{key:"sales",title:"销售额",width:"100px"},{key:"orderDate",title:"订单日期",width:"150px"},{key:"statusName",title:"状态",width:"100px"}],Ue=[{key:"unique_id",title:"ID编号",width:"100px"},{key:"orderNumber",title:"订单号",width:"10%"},{key:"quantityOrdered",title:"订购数量",width:"10%"},{key:"priceEach",title:"单价",width:"10%"},{key:"orderGoods",title:"订单货物",width:"50%"},{key:"sales",title:"销售额",width:"10%"},{key:"orderDate",title:"订单日期",width:"10%"},{key:"statusName",title:"状态",width:"100px"}],S=[{id:1,unique_id:1,orderNumber:10107,quantityOrdered:30,priceEach:95.7,orderGoods:"货物1, 货物2",sales:2871,orderDate:"2025-01-15",status:"Disputed",statusName:"待处理"},{id:2,unique_id:2,orderNumber:10121,quantityOrdered:34,priceEach:81.35,orderGoods:"货物3, 货物4",sales:2765.9,orderDate:"2025-01-16",status:"Shipped",statusName:"已发货"},{id:3,unique_id:3,orderNumber:10134,quantityOrdered:41,priceEach:94.74,orderGoods:"货物5, 货物6",sales:3884.34,orderDate:"2025-01-17",status:"In Process",statusName:"处理中"},{id:4,unique_id:4,orderNumber:10145,quantityOrdered:45,priceEach:83.26,orderGoods:"货物7, 货物8",sales:3746.7,orderDate:"2025-01-18",status:"In Process",statusName:"处理中"},{id:5,unique_id:5,orderNumber:10159,quantityOrdered:49,priceEach:100,orderGoods:"货物9, 货物10",sales:5205.27,orderDate:"2025-01-19",status:"Disputed",statusName:"待处理"},{id:6,unique_id:6,orderNumber:10168,quantityOrdered:36,priceEach:96.66,orderGoods:"货物11, 货物12",sales:3479.76,orderDate:"2025-01-20",status:"Shipped",statusName:"已发货"},{id:7,unique_id:7,orderNumber:10180,quantityOrdered:29,priceEach:86.13,orderGoods:"货物17, 货物18",sales:2497.77,orderDate:"2025-01-21",status:"Disputed",statusName:"待处理"},{id:8,unique_id:8,orderNumber:10188,quantityOrdered:48,priceEach:100,orderGoods:"货物19, 货物20",sales:5512.32,orderDate:"2025-01-22",status:"Disputed",statusName:"待处理"}],We=`
  .user-status {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 14px;
    font-size: 13px;
    border: 1px solid rgba(0,0,0,0.06);
    background: #fff;
  }
  .user-status--disputed {
    color: #c0392b;
    border-color: rgba(192,57,43,0.15);
    background: rgba(192,57,43,0.04);
  }
  .user-status--shipped {
    color: #1e90ff;
    border-color: rgba(30,144,255,0.15);
    background: rgba(30,144,255,0.04);
  }
  .user-status--inprocess {
    color: #16a34a;
    border-color: rgba(22,163,74,0.12);
    background: rgba(22,163,74,0.04);
  }
  `,ze=r=>t.jsx(x,{columns:A,data:S,rowKey:"id",...r}),G={name:"默认",render:ze,args:{}},Xe=r=>t.jsx(x,{columns:A,data:[],rowKey:"id",...r}),U={name:"暂无数据",render:Xe,args:{}},Ye=r=>t.jsx(x,{columns:A,data:S,rowKey:"id",...r}),z={name:"带复选框",render:Ye,args:{showCheckbox:!0}},Je=r=>t.jsx(x,{columns:Ge,data:S,rowKey:"id",...r}),X={name:"对齐方式",render:Je,args:{}},Qe=r=>{const[c,b]=le.useState(["1"]);return t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:12},children:["Selected: ",c.join(", ")||"(none)"]}),t.jsx(x,{columns:A,data:S,rowKey:"id",selectedKeys:c,onSelectionChange:f=>b(f),...r})]})},Y={name:"受控选择",render:Qe,args:{showCheckbox:!0}},Ze=r=>t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:12},children:[t.jsx("p",{children:"自定义宽度示例"}),t.jsx("p",{children:"可以尝试更改 preservePxAsMin 参数查看"}),t.jsx("p",{children:"preservePxAsMin = false：只要包含 px 列且总宽超出容器就触发横向滚动"})]}),t.jsx(x,{columns:Ue,data:S,rowKey:"id",showCheckbox:!0,...r})]}),J={name:"自定义宽度",render:Ze,args:{preservePxAsMin:!0,minColumnPx:80}},et=r=>{const c=Array.from({length:20}).flatMap((b,f)=>S.map((p,j)=>({...p,id:p.id+f*S.length,unique_id:p.unique_id+f*S.length})));return t.jsx(x,{columns:A,data:c,rowKey:"id",fixedHeader:!0,maxHeight:240,...r})},Q={name:"固定表头",render:et,args:{}},tt=r=>t.jsx(x,{columns:Te,data:S,rowKey:"id",showCheckbox:!0,fixedColumnCount:2,fixedRightCount:2,...r}),Z={name:"左右固定列",render:tt,args:{}},rt=r=>{const c=Array.from({length:20}).flatMap((b,f)=>S.map((p,j)=>({...p,id:p.id+f*S.length,unique_id:p.unique_id+f*S.length})));return t.jsx(x,{columns:Te,data:c,rowKey:"id",showCheckbox:!0,fixedHeader:!0,fixedColumnCount:2,fixedRightCount:2,maxHeight:240,...r})},ee={name:"固定表头 & 左右列",render:rt,args:{}},nt=r=>t.jsxs("div",{children:[t.jsxs("p",{children:["通过 ",t.jsx("code",{children:"border"})," 属性控制列之间的竖向分隔线和粘性列的分隔效果。"]}),t.jsx(x,{columns:A,data:S,rowKey:"id",...r})]}),te={name:"border 属性",render:nt,args:{border:!0,showCheckbox:!1}},at=r=>t.jsxs("div",{children:[t.jsx("style",{children:We}),t.jsx(x,{columns:A,data:S,rowKey:"id",renderCell:(c,b)=>{if(b.key==="statusName"){const f=String(c.status).toLowerCase().replace(/\s+/g,"");return t.jsx("span",{className:`user-status user-status--${f}`,children:c.statusName})}return b.key==="orderDate"?new Date(c.orderDate).toLocaleDateString():c[b.key]},...r})]}),re={name:"renderCell渲染",render:at,args:{}},st=r=>{const c=A.map(b=>b.key==="statusName"?{...b,render:(f,p)=>{const j=String(p.status).toLowerCase().replace(/\s+/g,"");return t.jsx("span",{className:`user-status user-status--${j}`,children:f})}}:b);return t.jsxs("div",{children:[t.jsx("style",{children:We}),t.jsx(x,{columns:c,data:S,rowKey:"id",...r})]})},ne={name:"列级渲染",render:st,args:{}},lt=[{key:"a",title:"列 A"},{key:"b",title:"列 B"},{key:"c",title:"列 C"},{key:"d",title:"列 D"},{key:"e",title:"列 E"}],ot=[{id:"v1",a:{value:"A: rowspan 2",rowSpan:2},b:{value:"B: colspan 3",colSpan:3},c:"",d:"",e:"E1"},{id:"v2",b:"should be covered",c:"should be covered",d:"should be covered",e:{value:"E2",colSpan:1}},{id:"v3",a:"A3",b:"B3",c:{value:"C: colspan 2",colSpan:2},d:"",e:"E3"},{id:"v4",a:"A4",b:"B4",c:"C4",d:"D4",e:"E4"}],it=r=>t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:12},children:["更明显的跨行/跨列示例，使用 ",t.jsx("code",{children:"{ value, colSpan, rowSpan }"}),"，并通过 ",t.jsx("code",{children:"renderCell"})," ","高亮合并单元格。"]}),t.jsx(x,{columns:lt,data:ot,rowKey:"id",renderCell:(c,b)=>{const f=c[b.key];if(f&&typeof f=="object"&&("colSpan"in f||"rowSpan"in f||"value"in f)){const j=f;return t.jsx("div",{style:{background:"rgba(14, 165, 233, 0.12)",padding:"10px 12px",borderRadius:6},children:j.value??""})}return c[b.key]},...r})]}),ae={name:"跨行/跨列",render:it,args:{}},dt=[{key:"name",title:"名称",span:(r,c)=>c===0?{rowSpan:2}:void 0},{key:"info",title:"信息"},{key:"extra",title:"额外"}],ct=[{id:"c1",name:"合并的名称",info:"info1",extra:"extra1"},{id:"c2",name:"被覆盖",info:"info2",extra:"extra2"},{id:"c3",name:"正常",info:"info3",extra:"extra3"}],ut=r=>t.jsxs("div",{children:[t.jsxs("div",{style:{marginBottom:12},children:["演示如何在列定义中通过 ",t.jsx("code",{children:"span"})," 回调控制 rowSpan/colSpan。"]}),t.jsx(x,{columns:dt,data:ct,rowKey:"id",...r})]}),se={name:"列级 span 回调",render:ut,args:{}};G.parameters={...G.parameters,docs:{...G.parameters?.docs,source:{originalSource:`{
  name: '默认',
  render: DefaultTemplate,
  args: {}
}`,...G.parameters?.docs?.source}}};U.parameters={...U.parameters,docs:{...U.parameters?.docs,source:{originalSource:`{
  name: '暂无数据',
  render: EmptyTemplate,
  args: {}
}`,...U.parameters?.docs?.source}}};z.parameters={...z.parameters,docs:{...z.parameters?.docs,source:{originalSource:`{
  name: '带复选框',
  render: WithCheckboxesTemplate,
  args: {
    showCheckbox: true
  }
}`,...z.parameters?.docs?.source}}};X.parameters={...X.parameters,docs:{...X.parameters?.docs,source:{originalSource:`{
  name: '对齐方式',
  render: AlignDemoTemplate,
  args: {}
}`,...X.parameters?.docs?.source}}};Y.parameters={...Y.parameters,docs:{...Y.parameters?.docs,source:{originalSource:`{
  name: '受控选择',
  render: ControlledSelectionTemplate,
  args: {
    showCheckbox: true
  }
}`,...Y.parameters?.docs?.source}}};J.parameters={...J.parameters,docs:{...J.parameters?.docs,source:{originalSource:`{
  name: '自定义宽度',
  render: MixTemplate,
  args: {
    preservePxAsMin: true,
    minColumnPx: 80
  }
}`,...J.parameters?.docs?.source}}};Q.parameters={...Q.parameters,docs:{...Q.parameters?.docs,source:{originalSource:`{
  name: '固定表头',
  render: FixedHeaderTemplate,
  args: {}
}`,...Q.parameters?.docs?.source}}};Z.parameters={...Z.parameters,docs:{...Z.parameters?.docs,source:{originalSource:`{
  name: '左右固定列',
  render: FixedBothSidesTemplate,
  args: {}
}`,...Z.parameters?.docs?.source}}};ee.parameters={...ee.parameters,docs:{...ee.parameters?.docs,source:{originalSource:`{
  name: '固定表头 & 左右列',
  render: FixedHeaderAndBothSidesTemplate,
  args: {}
}`,...ee.parameters?.docs?.source}}};te.parameters={...te.parameters,docs:{...te.parameters?.docs,source:{originalSource:`{
  name: 'border 属性',
  render: BorderedTemplate,
  args: {
    border: true,
    showCheckbox: false
  }
}`,...te.parameters?.docs?.source}}};re.parameters={...re.parameters,docs:{...re.parameters?.docs,source:{originalSource:`{
  name: 'renderCell渲染',
  render: RenderCellInjectedStylesTemplate,
  args: {}
}`,...re.parameters?.docs?.source}}};ne.parameters={...ne.parameters,docs:{...ne.parameters?.docs,source:{originalSource:`{
  name: '列级渲染',
  render: ColumnLevelRenderTemplate,
  args: {}
}`,...ne.parameters?.docs?.source}}};ae.parameters={...ae.parameters,docs:{...ae.parameters?.docs,source:{originalSource:`{
  name: '跨行/跨列',
  render: VisibleSpanTemplate,
  args: {}
}`,...ae.parameters?.docs?.source}}};se.parameters={...se.parameters,docs:{...se.parameters?.docs,source:{originalSource:`{
  name: '列级 span 回调',
  render: ColumnSpanTemplate,
  args: {}
}`,...se.parameters?.docs?.source}}};const bt=["Default","EmptyState","WithCheckboxes","AlignDemo","ControlledSelection","CustomWidths","FixedHeader","FixedBothSides","FixedHeaderAndBothSides","Bordered","RenderCellInjectedStyles","ColumnLevelRender","VisibleSpan","ColumnSpanAPI"];export{X as AlignDemo,te as Bordered,ne as ColumnLevelRender,se as ColumnSpanAPI,Y as ControlledSelection,J as CustomWidths,G as Default,U as EmptyState,Z as FixedBothSides,Q as FixedHeader,ee as FixedHeaderAndBothSides,re as RenderCellInjectedStyles,ae as VisibleSpan,z as WithCheckboxes,bt as __namedExportsOrder,yt as default};
