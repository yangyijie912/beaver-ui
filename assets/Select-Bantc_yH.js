import{j as l}from"./jsx-runtime-u17CrQMm.js";import{r as _}from"./iframe-poeLuani.js";function ge({controlledValue:e,defaultValue:t}){const[a,u]=_.useState(e??t);return _.useEffect(()=>{e!==void 0&&u(e)},[e]),{internalValue:a,setInternalValue:u}}function ye({options:e,query:t,userTyped:a,filterOption:u,searchBy:s="both",allowCreate:g=!1,multiple:h=!1,filterSelected:w=!1,internalValue:i}){const d=Array.isArray(i)?i:[],r=_.useMemo(()=>{if(!t||!a){const y=e;return h&&w?y.filter(P=>!d.includes(P.value)):y}const p=t.trim().toLowerCase();if(u)return e.filter(y=>u(p,y));if(s==="label")return e.filter(y=>y.label.toLowerCase().includes(p));if(s==="value")return e.filter(y=>y.value.toLowerCase().includes(p));const m=e.filter(y=>y.label.toLowerCase().includes(p)),T=e.filter(y=>!y.label.toLowerCase().includes(p)&&y.value.toLowerCase().includes(p)),R=[...m,...T];return h&&w?R.filter(y=>!d.includes(y.value)):R},[e,t,a,u,s,h,w,i]),c=_.useMemo(()=>{const p=r,m=t.trim();return g&&m&&p.length===0?[{label:m,value:m,__isNew:!0}]:p},[r,g,t]);return{filteredOptions:r,displayOptions:c}}function be({displayOptions:e,open:t,setOpen:a,handleSelectByValue:u,isDisabled:s=!1,onBackspace:g,onChar:h}){const[w,i]=_.useState(null),d=_.useCallback(r=>{if(!s){if(t&&r.key==="Backspace"&&(r.preventDefault(),g)){g(r);return}if(t&&r.key.length===1&&!r.ctrlKey&&!r.metaKey&&!r.altKey&&h){r.preventDefault(),h(r);return}if(r.key==="ArrowDown"){if(r.preventDefault(),!t){a(!0);return}i(c=>{const p=e,m=c===null?-1:c;for(let T=m+1;T<p.length;T++)if(!p[T].disabled)return T;return c})}else if(r.key==="ArrowUp"){if(r.preventDefault(),!t){a(!0);return}i(c=>{const p=e,m=c===null?p.length:c;for(let T=m-1;T>=0;T--)if(!p[T].disabled)return T;return c})}else if(r.key==="Enter"||r.key===" "){if(r.preventDefault(),!t)a(!0);else if(w!==null){const c=e[w];c&&!c.disabled&&u(c.value)}}else if(r.key==="Escape")a(!1);else if(r.key==="Home"){r.preventDefault();const c=e.findIndex(p=>!p.disabled);i(c>=0?c:0)}else if(r.key==="End"){r.preventDefault();const c=e.map(p=>p.disabled?-1:1).lastIndexOf(1);i(c>=0?c:e.length-1)}}},[e,t,a,u,w,s,g,h]);return{highlighted:w,setHighlighted:i,onKeyDown:d}}function he(e=700,t){const a=_.useRef(null),u=t??_.useRef(!1);function s(){a.current&&(window.clearTimeout(a.current),a.current=null)}function g(i){s(),a.current=window.setTimeout(()=>i(""),e)}function h({query:i,setQuery:d,options:r,setHighlighted:c}){const m=u.current?i.slice(0,-1):"";u.current=!0,d(m),g(d);const R=(m?r.filter(y=>y.label.toLowerCase().includes(m.trim().toLowerCase())||y.value.toLowerCase().includes(m.trim().toLowerCase())):r).findIndex(y=>!y.disabled);c(R>=0?R:0)}function w({key:i,query:d,setQuery:r,options:c,multiple:p,searchable:m,setHighlighted:T}){const R=!u.current&&!p&&m?i:d+i;u.current=!0,r(R),g(r);const y=R.trim().toLowerCase(),E=(y?c.filter(k=>k.label.toLowerCase().includes(y)||k.value.toLowerCase().includes(y)):c).findIndex(k=>!k.disabled);T(E>=0?E:0)}return{handleBackspace:h,handleChar:w,clear:s,userTypedRef:u}}const Y={open:!1,query:"",highlighted:null,inputFocused:!1};function we(e,t){switch(t.type){case"SET_OPEN":return{...e,open:t.payload};case"TOGGLE_OPEN":return{...e,open:!e.open};case"SET_QUERY":return{...e,query:t.payload};case"CLEAR_QUERY":return{...e,query:""};case"SET_HIGHLIGHTED":return{...e,highlighted:t.payload};case"SET_INPUT_FOCUSED":return{...e,inputFocused:t.payload};case"RESET":return{...Y};default:return e}}function _e(){const[e,t]=_.useReducer(we,Y);return{state:e,setOpen:a=>t({type:"SET_OPEN",payload:a}),toggleOpen:()=>t({type:"TOGGLE_OPEN"}),setQuery:a=>t({type:"SET_QUERY",payload:a}),clearQuery:()=>t({type:"CLEAR_QUERY"}),setHighlighted:a=>{t(typeof a=="function"?{type:"SET_HIGHLIGHTED",payload:a(e.highlighted)}:{type:"SET_HIGHLIGHTED",payload:a})},setInputFocused:a=>t({type:"SET_INPUT_FOCUSED",payload:a}),reset:()=>t({type:"RESET"})}}const W=({id:e,option:t,index:a,highlighted:u,isSelected:s,onMouseEnter:g,onMouseDown:h,renderHighlightedLabel:w})=>{const i=t.__isNew===!0,d=t.disabled;return l.jsxs("li",{id:e,role:"option","aria-disabled":d,"aria-selected":s,className:`beaver-select__option ${s?"beaver-select__option--selected":""} ${d?"beaver-select__option--disabled":""} ${u===a?"beaver-select__option--highlighted":""} ${i?"beaver-select__option--new":""}`,"data-disabled":d?"true":void 0,tabIndex:-1,onMouseEnter:()=>{d||g(a)},onMouseDown:r=>{d||(r.preventDefault(),r.stopPropagation(),h(r,t.value,d))},onPointerDown:r=>{t.disabled||(r.preventDefault(),r.stopPropagation(),h(r,t.value,d))},onTouchStart:r=>{t.disabled||(r.preventDefault(),r.stopPropagation(),h(r,t.value,d))},onClick:r=>r.stopPropagation(),children:[l.jsx("span",{className:"beaver-select__opt-prefix",children:s?"✔":""}),l.jsx("span",{className:"beaver-select__opt-label",children:i?l.jsx("span",{className:"beaver-select__create-label",children:`使用 "${t.label}"`}):w(t.label)})]},t.value)};W.__docgenInfo={description:"",methods:[],displayName:"OptionItem",props:{id:{required:!0,tsType:{name:"string"},description:""},option:{required:!0,tsType:{name:"intersection",raw:"SelectOption & { __isNew?: true }",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}},{name:"signature",type:"object",raw:"{ __isNew?: true }",signature:{properties:[{key:"__isNew",value:{name:"literal",value:"true",required:!1}}]}}]},description:""},index:{required:!0,tsType:{name:"number"},description:""},highlighted:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},onMouseEnter:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},onMouseDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent, value: string, disabled?: boolean) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"},{type:{name:"string"},name:"value"},{type:{name:"boolean"},name:"disabled"}],return:{name:"void"}}},description:""},renderHighlightedLabel:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => React.ReactNode",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const z=({menuOptions:e,highlighted:t,internalValue:a,onHighlight:u,onSelectByValue:s,renderHighlightedLabel:g,noDataLabel:h,listRef:w})=>l.jsxs("ul",{role:"listbox",className:"beaver-select__menu",ref:w,tabIndex:-1,"aria-activedescendant":t!==null?`beaver-select-opt-${t}`:void 0,onPointerDownCapture:i=>{const d=i.composedPath?i.composedPath():i.composedPath?.();d&&Array.isArray(d)&&d.some(c=>c&&c.getAttribute&&c.getAttribute("data-disabled")==="true")&&(i.preventDefault(),i.stopPropagation())},onTouchStartCapture:i=>{const d=i.composedPath?i.composedPath():i.composedPath?.();d&&Array.isArray(d)&&d.some(c=>c&&c.getAttribute&&c.getAttribute("data-disabled")==="true")&&(i.preventDefault(),i.stopPropagation())},children:[e.map((i,d)=>{const c=i.__isNew===!0?`__create-${i.value}`:i.value,p=Array.isArray(a)?a.includes(i.value):i.value===a;return l.jsx(W,{id:`beaver-select-opt-${d}`,option:i,index:d,highlighted:t,isSelected:p,onMouseEnter:m=>u(m),onMouseDown:(m,T,R)=>{R||s(i.value)},renderHighlightedLabel:g},c)}),e.length===0&&l.jsx("li",{className:"beaver-select__option beaver-select__no-data","aria-disabled":!0,children:l.jsx("span",{className:"beaver-select__opt-label",children:h??"暂无数据"})},"__no_data_or_match")]});z.__docgenInfo={description:"",methods:[],displayName:"OptionList",props:{menuOptions:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(SelectOption & { __isNew?: true })[]"},description:""},highlighted:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},internalValue:{required:!1,tsType:{name:"union",raw:"string | string[] | undefined",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"undefined"}]},description:""},onHighlight:{required:!0,tsType:{name:"signature",type:"function",raw:"(i: number) => void",signature:{arguments:[{type:{name:"number"},name:"i"}],return:{name:"void"}}},description:""},onSelectByValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},renderHighlightedLabel:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => React.ReactNode",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},noDataLabel:{required:!1,tsType:{name:"string"},description:"空数据时显示的提示文字，外部负责根据上下文（searchable/userTyped/query/options.length）计算"},listRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLUListElement>",elements:[{name:"HTMLUListElement"}]},description:"可选的 ul ref，供父组件（Select）聚焦或滚动使用"}}};const J=({values:e,options:t,onRemove:a})=>l.jsx("div",{className:"beaver-select__tags",children:e.map(u=>l.jsxs("span",{className:"beaver-select__tag",onClick:s=>s.stopPropagation(),children:[l.jsx("span",{className:"beaver-select__tag-label",children:t.find(s=>s.value===u)?.label??u}),l.jsx("button",{type:"button","aria-label":`remove ${u}`,className:"beaver-select__tag-remove",onClick:s=>{s.stopPropagation(),a(u,s)},children:"×"})]},u))});J.__docgenInfo={description:"",methods:[],displayName:"Tags",props:{values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""}}};const X=({multiple:e,query:t,onChangeEvent:a,searchRef:u,onKeyDown:s,onFocus:g,onBlur:h,placeholder:w,selectedValues:i=[],options:d=[],removeTag:r,onMouseDown:c,onClick:p})=>e?l.jsxs("div",{className:"beaver-select__tags-input",onMouseDown:c,onClick:p,children:[l.jsx(J,{values:i,options:d,onRemove:r??(()=>{})}),l.jsx("input",{ref:u,className:"beaver-select__input",value:t,onChange:m=>a?a(m):void 0,onFocus:g,onBlur:h,onKeyDown:s,placeholder:i.length===0&&!t?w:""})]}):l.jsx("input",{ref:u,className:"beaver-select__input",value:t,onChange:m=>a?a(m):void 0,onFocus:g,onBlur:h,onKeyDown:s,onMouseDown:m=>m.stopPropagation(),onClick:m=>m.stopPropagation(),placeholder:w});X.__docgenInfo={description:"",methods:[],displayName:"SearchInput",props:{multiple:{required:!1,tsType:{name:"boolean"},description:""},query:{required:!0,tsType:{name:"string"},description:""},onChangeEvent:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:"接收原生 input 的 ChangeEvent。父组件可通过事件对象读取 value 并决定如何处理（例如替换行为）"},searchRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement | null>",elements:[{name:"union",raw:"HTMLInputElement | null",elements:[{name:"HTMLInputElement"},{name:"null"}]}]},description:"允许传入可能为 null 的 ref（Select 中常用 RefObject<HTMLInputElement | null>）"},onKeyDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.KeyboardEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},onFocus:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},selectedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},removeTag:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onMouseDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""}}};const Z=({selectedValues:e,options:t,onRemove:a})=>l.jsx("div",{className:"beaver-select__tags",children:e.map(u=>l.jsxs("span",{className:"beaver-select__tag",onClick:s=>s.stopPropagation(),children:[l.jsx("span",{className:"beaver-select__tag-label",children:t.find(s=>s.value===u)?.label??u}),l.jsx("button",{type:"button","aria-label":`remove ${u}`,className:"beaver-select__tag-remove",onClick:s=>a(u,s),children:"×"})]},u))});Z.__docgenInfo={description:"多选标签显示组件",methods:[],displayName:"SelectTags",props:{selectedValues:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"已选值数组"},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"选项列表"},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:"移除标签回调"}}};const ee=({loading:e,loadingIcon:t,icon:a})=>l.jsx("div",{className:"beaver-select__icons",children:e?t?l.jsx("span",{className:"beaver-select__loading-icon",children:t}):l.jsx("span",{className:"beaver-select__spinner","aria-hidden":!0}):a?l.jsx("span",{className:"beaver-select__icon",children:a}):l.jsx("span",{className:"beaver-select__arrow","aria-hidden":!0,children:l.jsx("svg",{className:"beaver-select__arrow-svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:l.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})})})});ee.__docgenInfo={description:`Select 组件的图标区（右侧）
支持：loading 状态、自定义图标`,methods:[],displayName:"SelectIcons",props:{loading:{required:!0,tsType:{name:"boolean"},description:"是否加载中"},loadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义 loading 图标"},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义图标"}}};function te(e,t){const a=t.trim();if(!a)return e;const s=e.toLowerCase().indexOf(a.toLowerCase());if(s===-1)return e;const g=e.slice(0,s),h=e.slice(s,s+a.length),w=e.slice(s+a.length);return l.jsxs(l.Fragment,{children:[g,l.jsx("span",{className:"beaver-select__match",children:h}),w]})}function Te(e){return e===void 0?{}:{width:typeof e=="number"?`${e}px`:e}}function Re(e,t,a,u){return["beaver-select-wrapper",`beaver-select--${e}`,t?"beaver-select--disabled":"",a?"beaver-select--open":"",u||""].filter(Boolean).join(" ")}function Ee(e,t,a,u){return e?"暂无数据":t&&a&&u.trim()?"无匹配项":"暂无数据"}te.__docgenInfo={description:"高亮渲染 label 中匹配的子串",methods:[],displayName:"renderHighlightedLabel"};const qe=({options:e=[],placeholder:t="请选择",value:a,defaultValue:u,onChange:s,searchable:g=!1,allowCreate:h=!1,filterOption:w,searchBy:i="both",disabled:d=!1,loading:r=!1,icon:c,loadingIcon:p,className:m,size:T="medium",name:R,width:y,style:P,multiple:E=!1,filterSelected:k=!1,...ne})=>{const{state:ae,setOpen:S,setQuery:I,setHighlighted:j,setInputFocused:O}=_e(),{open:N,query:q,highlighted:U}=ae,{internalValue:f,setInternalValue:A}=ge({controlledValue:a,defaultValue:u}),F=_.useRef(null),re=_.useRef(null),$=_.useRef(null),D=_.useRef(!1),L=_.useRef(!1),V=_.useRef(null),{handleBackspace:se,handleChar:ie}=he(700,L);_.useEffect(()=>{function n(o){F.current&&(F.current.contains(o.target)||S(!1))}return document.addEventListener("mousedown",n),()=>{document.removeEventListener("mousedown",n)}},[N]);const{displayOptions:C}=ye({options:e,query:q,userTyped:L.current,filterOption:w,searchBy:i,allowCreate:h,multiple:E,filterSelected:k,internalValue:f});_.useEffect(()=>{if(!N){if(D.current){D.current=!1,j(null);return}if(h&&q.trim()){const n=q.trim(),o=e.find(v=>v.value===n||v.label===n);o&&!o.disabled?(a===void 0&&A(o.value),s?.(o.value)):(a===void 0&&A(n),s?.(n))}I(""),j(null)}},[N]),_.useEffect(()=>()=>{V.current&&window.clearTimeout(V.current)},[]);const K=Array.isArray(f)?e.find(n=>n.value===f[0]):e.find(n=>n.value===f),G=Array.isArray(f)?f:[],H=d||r;function le(){H||S(!N)}function M(n){const o=e.find(b=>b.value===n);if(o&&o.disabled)return;if(E===!0){const b=Array.isArray(f)?[...f]:[],x=b.indexOf(n);x>=0?b.splice(x,1):b.push(n),a===void 0&&A(b),s?.(b),I(""),D.current=!0,k&&S(!1);return}a===void 0&&A(n),s?.(n),g&&(L.current=!1),I(""),D.current=!0,S(!1)}const{onKeyDown:ue}=be({displayOptions:C,open:N,setOpen:S,handleSelectByValue:M,isDisabled:H,onBackspace:n=>{n.preventDefault(),se({query:q,setQuery:I,options:e,setHighlighted:j})},onChar:n=>{n.preventDefault(),ie({key:n.key,query:q,setQuery:I,options:e,multiple:E,searchable:g,setHighlighted:j})}});_.useEffect(()=>{if(N&&U===null){const n=C,o=n.findIndex(b=>Array.isArray(f)?f.includes(b.value):b.value===f),v=n.findIndex(b=>!b.disabled);j(o>=0?o:v>=0?v:0)}N&&g&&setTimeout(()=>$.current?.focus(),0)},[N]);const oe=C;function B(n,o){o?.stopPropagation();const v=Array.isArray(f)?[...f]:[],b=v.indexOf(n);b>=0&&v.splice(b,1),a===void 0&&A(v),s?.(v)}const ce=(n,o)=>{B(n,o)},de=n=>{L.current=!0,I(n.target.value),j(0)},me=n=>{const o=n.target.value;if(!L.current&&!E&&g){let v=o.replace(q,"");v===""&&(v=o),L.current=!0,I(v),j(0);return}L.current=!0,I(o),j(0)},pe=()=>{O(!0),!L.current&&g&&!E&&q&&setTimeout(()=>$.current?.select(),0)},fe=n=>{if(n.stopPropagation(),D.current){D.current=!1,O(!1);return}const o=q.trim();if(h&&o){const v=e.find(b=>b.value===o||b.label===o);v&&!v.disabled?E?M(v.value):(a===void 0&&A(v.value),s?.(v.value)):E?M(o):(a===void 0&&A(o),s?.(o))}I(""),O(!1)},ve=n=>{if(n.stopPropagation(),n.key==="ArrowDown")n.preventDefault(),j(o=>{const v=C,b=o===null?-1:o;for(let x=b+1;x<v.length;x++)if(!v[x].disabled)return x;return o});else if(n.key==="ArrowUp")n.preventDefault(),j(o=>{const v=C,b=o===null?v.length:o;for(let x=b-1;x>=0;x--)if(!v[x].disabled)return x;return o});else if(n.key==="Enter"){n.preventDefault();const o=q.trim();if(h&&o&&!e.find(Q=>Q.value===o||Q.label===o)){M(o),I("");return}const b=C[U??0];b&&!b.disabled&&M(b.value)}else n.key==="Escape"&&S(!1)};return l.jsxs("div",{className:Re(T,H,N,m),ref:F,"aria-disabled":H,style:{...P,...Te(y)},children:[l.jsxs("div",{role:"button",className:"beaver-select__control","aria-haspopup":"listbox","aria-expanded":N,onClick:le,onKeyDown:ue,tabIndex:H?-1:0,...ne,children:[l.jsx("div",{className:"beaver-select__display",children:g&&N?l.jsx(X,{multiple:E,query:q,onChangeEvent:E?de:me,searchRef:$,onKeyDown:ve,onFocus:pe,onBlur:fe,placeholder:q?"":f&&!Array.isArray(f)?e.find(n=>n.value===f)?.label??String(f):t,selectedValues:G,options:e,removeTag:ce,onMouseDown:n=>n.stopPropagation(),onClick:n=>n.stopPropagation()}):Array.isArray(f)?G.length===0?l.jsx("span",{className:"beaver-select__value beaver-select__placeholder",children:t}):l.jsx(Z,{selectedValues:G,options:e,onRemove:B}):l.jsx("span",{className:`beaver-select__value ${f??K?"":"beaver-select__placeholder"}`,children:f?e.find(n=>n.value===f)?.label??f:K?K.label:t})}),l.jsx(ee,{loading:r,loadingIcon:p,icon:c})]}),N&&l.jsx(z,{menuOptions:oe,highlighted:U,internalValue:f,onHighlight:n=>j(n),onSelectByValue:n=>M(n),renderHighlightedLabel:n=>te(n,q),noDataLabel:Ee(e.length===0,g,L.current,q),listRef:re}),E===!0?l.jsx("select",{name:R,multiple:!0,style:{display:"none"},"aria-hidden":!0,children:e.map(n=>l.jsx("option",{value:n.value,selected:Array.isArray(f)?f.includes(n.value):!1,children:n.label},n.value))}):l.jsx("select",{name:R,value:(Array.isArray(f)?f[0]:f)??"",onChange:n=>{M(n.target.value)},style:{display:"none"},"aria-hidden":!0})]})};qe.__docgenInfo={description:`Select 组件
- 使用场景：在多个选项中进行选择，支持单选和多选
- 支持搜索和过滤选项
- 支持创建新选项
- 支持键盘导航
- 支持自定义样式和图标`,methods:[],displayName:"Select",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"下拉选项列表",defaultValue:{value:"[]",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"占位符",defaultValue:{value:"'请选择'",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"单选时为 string，复选时为 string[]"},defaultValue:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"默认值"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | string[]) => void",signature:{arguments:[{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"}],return:{name:"void"}}},description:"事件回调，参数为选中的值"},multiple:{required:!1,tsType:{name:"boolean"},description:"是否支持多选",defaultValue:{value:"false",computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"是否在下拉中显示搜索框",defaultValue:{value:"false",computed:!1}},allowCreate:{required:!1,tsType:{name:"boolean"},description:"是否允许在没有匹配项时创建自定义输入项（默认 false）",defaultValue:{value:"false",computed:!1}},filterOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(input: string, option: SelectOption) => boolean",signature:{arguments:[{type:{name:"string"},name:"input"},{type:{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}},name:"option"}],return:{name:"boolean"}}},description:"定制过滤函数：如果提供，将优先使用"},searchBy:{required:!1,tsType:{name:"union",raw:"'label' | 'value' | 'both'",elements:[{name:"literal",value:"'label'"},{name:"literal",value:"'value'"},{name:"literal",value:"'both'"}]},description:"搜索策略：'label' 只按 label 搜索，'value' 只按 value，'both' 按 label 与 value 搜索但优先 label 匹配",defaultValue:{value:"'both'",computed:!1}},filterSelected:{required:!1,tsType:{name:"boolean"},description:"仅在 `multiple` 为 true 时生效：在下拉中隐藏已选项，并在每次多选后关闭下拉。",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"是否禁用",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:"是否加载中",defaultValue:{value:"false",computed:!1}},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义箭头/后缀图标（传入 ReactNode）"},loadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义 loading 图标（传入 ReactNode），优先于默认 spinner"},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"直接设置组件宽度，支持 number(像素) 或 字符串(如 '50%','200px')"},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:"组件尺寸",defaultValue:{value:"'medium'",computed:!1}}}};export{qe as S};
