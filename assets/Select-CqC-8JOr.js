import{j as i}from"./jsx-runtime-u17CrQMm.js";import{r as f,R as ke}from"./iframe-CIZpvQ1U.js";import{r as Me}from"./index-B1Xph6y5.js";import{u as Le}from"./useMenuPosition-TViZUNcH.js";import{C as Ce}from"./Check-C9Lcua7d.js";const ae=e=>i.jsx("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:i.jsx("path",{d:"M6 9l6 6 6-6",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})});ae.__docgenInfo={description:"",methods:[],displayName:"ChevronDown"};function Ae({controlledValue:e,defaultValue:n}){const[r,u]=f.useState(e??n);return f.useEffect(()=>{e!==void 0&&u(e)},[e]),{internalValue:r,setInternalValue:u}}function De({options:e,query:n,userTyped:r,filterOption:u,searchBy:l="both",allowCreate:y=!1,multiple:T=!1,filterSelected:R=!1,internalValue:g}){const h=Array.isArray(g)?g:[],s=f.useMemo(()=>{if(!n||!r){const o=e;return T&&R?o.filter(q=>!h.includes(q.value)):o}const b=n.trim().toLowerCase();if(u)return e.filter(o=>u(b,o));if(l==="label")return e.filter(o=>o.label.toLowerCase().includes(b));if(l==="value")return e.filter(o=>o.value.toLowerCase().includes(b));const p=e.filter(o=>o.label.toLowerCase().includes(b)),w=e.filter(o=>!o.label.toLowerCase().includes(b)&&o.value.toLowerCase().includes(b)),c=[...p,...w];return T&&R?c.filter(o=>!h.includes(o.value)):c},[e,n,r,u,l,T,R,g]),m=f.useMemo(()=>{const b=s,p=n.trim();return y&&p&&b.length===0?[{label:p,value:p,__isNew:!0}]:b},[s,y,n]);return{filteredOptions:s,displayOptions:m}}function Pe({displayOptions:e,open:n,setOpen:r,handleSelectByValue:u,isDisabled:l=!1,onBackspace:y,onChar:T}){const[R,g]=f.useState(null),h=f.useCallback(s=>{if(!l){if(n&&s.key==="Backspace"&&(s.preventDefault(),y)){y(s);return}if(n&&s.key.length===1&&!s.ctrlKey&&!s.metaKey&&!s.altKey&&T){s.preventDefault(),T(s);return}if(s.key==="ArrowDown"){if(s.preventDefault(),!n){r(!0);return}g(m=>{const b=e,p=m===null?-1:m;for(let w=p+1;w<b.length;w++)if(!b[w].disabled)return w;return m})}else if(s.key==="ArrowUp"){if(s.preventDefault(),!n){r(!0);return}g(m=>{const b=e,p=m===null?b.length:m;for(let w=p-1;w>=0;w--)if(!b[w].disabled)return w;return m})}else if(s.key==="Enter"||s.key===" "){if(s.preventDefault(),!n)r(!0);else if(R!==null){const m=e[R];m&&!m.disabled&&u(m.value)}}else if(s.key==="Escape")r(!1);else if(s.key==="Home"){s.preventDefault();const m=e.findIndex(b=>!b.disabled);g(m>=0?m:0)}else if(s.key==="End"){s.preventDefault();const m=e.map(b=>b.disabled?-1:1).lastIndexOf(1);g(m>=0?m:e.length-1)}}},[e,n,r,u,R,l,y,T]);return{highlighted:R,setHighlighted:g,onKeyDown:h}}function Oe(e=700,n){const r=f.useRef(null),u=n??f.useRef(!1);function l(){r.current&&(window.clearTimeout(r.current),r.current=null)}function y(g){l(),r.current=window.setTimeout(()=>g(""),e)}function T({query:g,setQuery:h,options:s,setHighlighted:m}){const p=u.current?g.slice(0,-1):"";u.current=!0,h(p),y(h);const c=(p?s.filter(o=>o.label.toLowerCase().includes(p.trim().toLowerCase())||o.value.toLowerCase().includes(p.trim().toLowerCase())):s).findIndex(o=>!o.disabled);m(c>=0?c:0)}function R({key:g,query:h,setQuery:s,options:m,multiple:b,searchable:p,setHighlighted:w}){const c=!u.current&&!b&&p?g:h+g;u.current=!0,s(c),y(s);const o=c.trim().toLowerCase(),N=(o?m.filter(E=>E.label.toLowerCase().includes(o)||E.value.toLowerCase().includes(o)):m).findIndex(E=>!E.disabled);w(N>=0?N:0)}return{handleBackspace:T,handleChar:R,clear:l,userTypedRef:u}}const se={open:!1,query:"",highlighted:null,inputFocused:!1};function He(e,n){switch(n.type){case"SET_OPEN":return{...e,open:n.payload};case"TOGGLE_OPEN":return{...e,open:!e.open};case"SET_QUERY":return{...e,query:n.payload};case"CLEAR_QUERY":return{...e,query:""};case"SET_HIGHLIGHTED":return{...e,highlighted:n.payload};case"SET_INPUT_FOCUSED":return{...e,inputFocused:n.payload};case"RESET":return{...se};default:return e}}function $e(){const[e,n]=f.useReducer(He,se);return{state:e,setOpen:r=>n({type:"SET_OPEN",payload:r}),toggleOpen:()=>n({type:"TOGGLE_OPEN"}),setQuery:r=>n({type:"SET_QUERY",payload:r}),clearQuery:()=>n({type:"CLEAR_QUERY"}),setHighlighted:r=>{n(typeof r=="function"?{type:"SET_HIGHLIGHTED",payload:r(e.highlighted)}:{type:"SET_HIGHLIGHTED",payload:r})},setInputFocused:r=>n({type:"SET_INPUT_FOCUSED",payload:r}),reset:()=>n({type:"RESET"})}}const ee=({id:e,option:n,index:r,highlighted:u,isSelected:l,onMouseEnter:y,onMouseDown:T,renderHighlightedLabel:R})=>{const g=n.__isNew===!0,h=n.disabled;return i.jsxs("li",{id:e,role:"option","aria-disabled":h,"aria-selected":l,className:`beaver-select__option ${l?"beaver-select__option--selected":""} ${h?"beaver-select__option--disabled":""} ${u===r?"beaver-select__option--highlighted":""} ${g?"beaver-select__option--new":""}`,"data-disabled":h?"true":void 0,tabIndex:-1,onMouseEnter:()=>{h||y(r)},onMouseDown:s=>{h||(s.preventDefault(),s.stopPropagation(),T(s,n.value,h))},onPointerDown:s=>{n.disabled||(s.preventDefault(),s.stopPropagation(),T(s,n.value,h))},onTouchStart:s=>{n.disabled||(s.preventDefault(),s.stopPropagation(),T(s,n.value,h))},onClick:s=>s.stopPropagation(),children:[i.jsx("span",{className:"beaver-select__opt-label",children:g?i.jsx("span",{className:"beaver-select__create-label",children:`使用 "${n.label}"`}):R(n.label)}),l&&i.jsx("span",{className:"beaver-select__opt-checkmark","aria-hidden":!0,children:i.jsx(Ce,{width:16,height:16,"aria-hidden":!0})})]},n.value)};ee.__docgenInfo={description:"",methods:[],displayName:"OptionItem",props:{id:{required:!0,tsType:{name:"string"},description:""},option:{required:!0,tsType:{name:"intersection",raw:"SelectOption & { __isNew?: true }",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}},{name:"signature",type:"object",raw:"{ __isNew?: true }",signature:{properties:[{key:"__isNew",value:{name:"literal",value:"true",required:!1}}]}}]},description:""},index:{required:!0,tsType:{name:"number"},description:""},highlighted:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},isSelected:{required:!0,tsType:{name:"boolean"},description:""},onMouseEnter:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},onMouseDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent, value: string, disabled?: boolean) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"},{type:{name:"string"},name:"value"},{type:{name:"boolean"},name:"disabled"}],return:{name:"void"}}},description:""},renderHighlightedLabel:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => React.ReactNode",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const ie=({height:e,itemCount:n,itemSize:r,width:u="100%",children:l})=>{const y=f.useRef(null),[T,R]=f.useState(0),g=f.useCallback(w=>{R(w.target.scrollTop||0)},[]),h=n*r,s=Math.max(0,Math.floor(T/r)),m=Math.min(n,Math.ceil(e/r)+1),b=Math.min(n-1,s+m-1),p=[];for(let w=s;w<=b;w++){const c={position:"absolute",top:w*r,height:r,width:"100%"};p.push(l({index:w,style:c}))}return i.jsx("div",{ref:y,onScroll:g,style:{height:e,width:u,overflow:"auto",position:"relative"},children:i.jsx("div",{style:{height:h,position:"relative"},children:p})})};ie.__docgenInfo={description:"",methods:[],displayName:"VirtualList",props:{height:{required:!0,tsType:{name:"number"},description:""},itemCount:{required:!0,tsType:{name:"number"},description:""},itemSize:{required:!0,tsType:{name:"number"},description:""},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"",defaultValue:{value:"'100%'",computed:!1}},children:{required:!0,tsType:{name:"signature",type:"function",raw:"(props: { index: number; style: React.CSSProperties; data?: any }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ index: number; style: React.CSSProperties; data?: any }",signature:{properties:[{key:"index",value:{name:"number",required:!0}},{key:"style",value:{name:"ReactCSSProperties",raw:"React.CSSProperties",required:!0}},{key:"data",value:{name:"any",required:!1}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const le=({menuOptions:e,highlighted:n,internalValue:r,onHighlight:u,onSelectByValue:l,renderHighlightedLabel:y,noDataLabel:T,listRef:R,menuStyle:g,menuClassName:h})=>{const s=e.length>100,m=40,b=f.useMemo(()=>({index:c,style:o})=>{const q=e[c],E=q.__isNew===!0?`__create-${q.value}`:q.value,D=Array.isArray(r)?r.includes(q.value):q.value===r;return i.jsx("div",{style:o,children:i.jsx(ee,{id:`beaver-select-opt-${c}`,option:q,index:c,highlighted:n,isSelected:D,onMouseEnter:K=>u(K),onMouseDown:(K,P,Q)=>{Q||l(q.value)},renderHighlightedLabel:y})},E)},[e,n,r,u,l,y]),p=c=>{const o=c.composedPath?c.composedPath():c.composedPath?.();o&&Array.isArray(o)&&o.some(N=>N&&N.getAttribute&&N.getAttribute("data-disabled")==="true")&&(c.preventDefault(),c.stopPropagation())},w=c=>{const o=c.composedPath?c.composedPath():c.composedPath?.();o&&Array.isArray(o)&&o.some(N=>N&&N.getAttribute&&N.getAttribute("data-disabled")==="true")&&(c.preventDefault(),c.stopPropagation())};return e.length===0?i.jsx("ul",{role:"listbox",className:`beaver-select__menu ${h??""}`,style:g,ref:R,tabIndex:-1,"aria-activedescendant":void 0,onPointerDownCapture:p,onTouchStartCapture:w,children:i.jsx("li",{className:"beaver-select__option beaver-select__no-data","aria-disabled":!0,children:i.jsx("span",{className:"beaver-select__opt-label",children:T??"暂无数据"})},"__no_data_or_match")}):s?i.jsx("div",{role:"listbox",className:`beaver-select__menu ${h??""}`,style:g,ref:R,tabIndex:-1,"aria-activedescendant":n!==null?`beaver-select-opt-${n}`:void 0,onPointerDownCapture:p,onTouchStartCapture:w,children:i.jsx(ie,{height:Math.min(8,e.length)*m,itemCount:e.length,itemSize:m,width:"100%",children:b})}):i.jsx("ul",{role:"listbox",className:`beaver-select__menu ${h??""}`,style:g,ref:R,tabIndex:-1,"aria-activedescendant":n!==null?`beaver-select-opt-${n}`:void 0,onPointerDownCapture:p,onTouchStartCapture:w,children:e.map((c,o)=>{const N=c.__isNew===!0?`__create-${c.value}`:c.value,E=Array.isArray(r)?r.includes(c.value):c.value===r;return i.jsx(ee,{id:`beaver-select-opt-${o}`,option:c,index:o,highlighted:n,isSelected:E,onMouseEnter:D=>u(D),onMouseDown:(D,K,P)=>{P||l(c.value)},renderHighlightedLabel:y},N)})})};le.__docgenInfo={description:"",methods:[],displayName:"OptionList",props:{menuOptions:{required:!0,tsType:{name:"Array",elements:[{name:"unknown"}],raw:"(SelectOption & { __isNew?: true })[]"},description:""},highlighted:{required:!0,tsType:{name:"union",raw:"number | null",elements:[{name:"number"},{name:"null"}]},description:""},internalValue:{required:!1,tsType:{name:"union",raw:"string | string[] | undefined",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"undefined"}]},description:""},onHighlight:{required:!0,tsType:{name:"signature",type:"function",raw:"(i: number) => void",signature:{arguments:[{type:{name:"number"},name:"i"}],return:{name:"void"}}},description:""},onSelectByValue:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string) => void",signature:{arguments:[{type:{name:"string"},name:"value"}],return:{name:"void"}}},description:""},renderHighlightedLabel:{required:!0,tsType:{name:"signature",type:"function",raw:"(label: string) => React.ReactNode",signature:{arguments:[{type:{name:"string"},name:"label"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},noDataLabel:{required:!1,tsType:{name:"string"},description:""},listRef:{required:!1,tsType:{name:"ReactRef",raw:"React.Ref<HTMLUListElement>",elements:[{name:"HTMLUListElement"}]},description:""},menuStyle:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},menuClassName:{required:!1,tsType:{name:"string"},description:""}}};const ue=({values:e,options:n,onRemove:r})=>i.jsx("div",{className:"beaver-select__tags",children:e.map(u=>i.jsxs("span",{className:"beaver-select__tag",onClick:l=>l.stopPropagation(),children:[i.jsx("span",{className:"beaver-select__tag-label",children:n.find(l=>l.value===u)?.label??u}),i.jsx("button",{type:"button","aria-label":`remove ${u}`,className:"beaver-select__tag-remove",onClick:l=>{l.stopPropagation(),r(u,l)},children:"×"})]},u))});ue.__docgenInfo={description:"",methods:[],displayName:"Tags",props:{values:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:""},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""}}};const oe=({multiple:e,query:n,onChangeEvent:r,searchRef:u,onKeyDown:l,onFocus:y,onBlur:T,placeholder:R,selectedValues:g=[],options:h=[],removeTag:s,onMouseDown:m,onClick:b})=>e?i.jsxs("div",{className:"beaver-select__tags-input",onMouseDown:m,onClick:b,children:[g.length>0&&i.jsx(ue,{values:g,options:h,onRemove:s??(()=>{})}),i.jsx("input",{ref:u,className:"beaver-select__input",value:n,onChange:p=>r?r(p):void 0,onFocus:y,onBlur:T,onKeyDown:l,placeholder:g.length===0&&!n?R:""})]}):i.jsx("input",{ref:u,className:"beaver-select__input",value:n,onChange:p=>r?r(p):void 0,onFocus:y,onBlur:T,onKeyDown:l,onMouseDown:p=>p.stopPropagation(),onClick:p=>p.stopPropagation(),placeholder:R});oe.__docgenInfo={description:"",methods:[],displayName:"SearchInput",props:{multiple:{required:!1,tsType:{name:"boolean"},description:""},query:{required:!0,tsType:{name:"string"},description:""},onChangeEvent:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.ChangeEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:"接收原生 input 的 ChangeEvent。父组件可通过事件对象读取 value 并决定如何处理（例如替换行为）"},searchRef:{required:!1,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLInputElement | null>",elements:[{name:"union",raw:"HTMLInputElement | null",elements:[{name:"HTMLInputElement"},{name:"null"}]}]},description:"允许传入可能为 null 的 ref（Select 中常用 RefObject<HTMLInputElement | null>）"},onKeyDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.KeyboardEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactKeyboardEvent",raw:"React.KeyboardEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},onFocus:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.FocusEvent<HTMLInputElement>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},name:"e"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},selectedValues:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},removeTag:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onMouseDown:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:""}}};const ce=({selectedValues:e,options:n,onRemove:r})=>i.jsx("div",{className:"beaver-select__tags",children:e.map(u=>i.jsxs("span",{className:"beaver-select__tag",onClick:l=>l.stopPropagation(),children:[i.jsx("span",{className:"beaver-select__tag-label",children:n.find(l=>l.value===u)?.label??u}),i.jsx("button",{type:"button","aria-label":`remove ${u}`,className:"beaver-select__tag-remove",onClick:l=>r(u,l),children:"×"})]},u))});ce.__docgenInfo={description:"多选标签显示组件",methods:[],displayName:"SelectTags",props:{selectedValues:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"已选值数组"},options:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"选项列表"},onRemove:{required:!0,tsType:{name:"signature",type:"function",raw:"(value: string, e?: React.MouseEvent) => void",signature:{arguments:[{type:{name:"string"},name:"value"},{type:{name:"ReactMouseEvent",raw:"React.MouseEvent"},name:"e"}],return:{name:"void"}}},description:"移除标签回调"}}};const de=({loading:e,loadingIcon:n,icon:r})=>i.jsx("div",{className:"beaver-select__icons",children:e?n?i.jsx("span",{className:"beaver-select__loading-icon",children:n}):i.jsx("span",{className:"beaver-select__spinner","aria-hidden":!0}):r?i.jsx("span",{className:"beaver-select__icon",children:r}):i.jsx("span",{className:"beaver-select__arrow","aria-hidden":!0,children:i.jsx(ae,{className:"beaver-select__arrow-svg",width:14,height:14,"aria-hidden":!0})})});de.__docgenInfo={description:`Select 组件的图标区（右侧）
支持：loading 状态、自定义图标`,methods:[],displayName:"SelectIcons",props:{loading:{required:!0,tsType:{name:"boolean"},description:"是否加载中"},loadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义 loading 图标"},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义图标"}}};function me(e,n){const r=n.trim();if(!r)return e;const l=e.toLowerCase().indexOf(r.toLowerCase());if(l===-1)return e;const y=e.slice(0,l),T=e.slice(l,l+r.length),R=e.slice(l+r.length);return i.jsxs(i.Fragment,{children:[y,i.jsx("span",{className:"beaver-select__match",children:T}),R]})}function Ue(e){return e===void 0?{}:{width:typeof e=="number"?`${e}px`:e}}function Fe(e,n,r,u){return["beaver-select-wrapper",`beaver-select--${e}`,n?"beaver-select--disabled":"",r?"beaver-select--open":"",u||""].filter(Boolean).join(" ")}function Ke(e,n,r,u){return e?"暂无数据":n&&r&&u.trim()?"无匹配项":"暂无数据"}me.__docgenInfo={description:"高亮渲染 label 中匹配的子串",methods:[],displayName:"renderHighlightedLabel"};const pe=ke.forwardRef(({options:e=[],placeholder:n="请选择",value:r,defaultValue:u,onChange:l,searchable:y=!1,allowCreate:T=!1,filterOption:R,searchBy:g="both",disabled:h=!1,loading:s=!1,icon:m,loadingIcon:b,className:p,size:w="medium",menuClassName:c,name:o,width:q,style:N,multiple:E=!1,filterSelected:D=!1,...K},P)=>{const{state:Q,setOpen:O,setQuery:I,setHighlighted:k,setInputFocused:W}=$e(),{open:x,query:S,highlighted:V}=Q,{internalValue:_,setInternalValue:A}=Ae({controlledValue:r,defaultValue:u}),L=f.useRef(null),fe=t=>{L.current=t,P&&(typeof P=="function"?P(t):P.current=t)},Y=f.useRef(null),$=f.useRef(!1),C=f.useRef(!1),te=f.useRef(null),ne=f.useRef(null),ve=f.useRef(null),{handleBackspace:ge,handleChar:ye}=Oe(700,C),[M,J]=f.useState(null),G=Le(L,ne,x,6);f.useEffect(()=>{const t=L.current;if(t)return x&&M!==null&&q===void 0&&(t.style.setProperty("width",`${M}px`),t.style.setProperty("box-sizing","border-box")),!x&&q===void 0&&(t.style.removeProperty("width"),t.style.removeProperty("box-sizing")),()=>{q===void 0&&(t.style.removeProperty("width"),t.style.removeProperty("box-sizing"))}},[x,M,q]),f.useEffect(()=>{if(!x||q!==void 0)return;const t=L.current;if(!t)return;const a=new ResizeObserver(()=>{const d=t.getBoundingClientRect().width;J(d)});return a.observe(t),()=>{a.disconnect()}},[x,q]);const[,be]=f.useState(0),B=f.useRef(!1);f.useEffect(()=>{if(!x)return;const t=L.current;if(!t)return;const a=()=>{B.current||(B.current=!0,window.requestAnimationFrame(()=>{B.current=!1,be(v=>v+1)}))},d=new MutationObserver(a);return d.observe(t,{childList:!0,subtree:!0,attributes:!0}),()=>{d.disconnect(),B.current=!1}},[x]),f.useEffect(()=>{function t(a){L.current&&(L.current.contains(a.target)||O(!1))}return document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[x]),f.useEffect(()=>{if(!x)return;function t(){const a=L.current;a&&J(a.getBoundingClientRect().width)}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[x]);const[he,we]=f.useState(S);f.useEffect(()=>{const t=window.setTimeout(()=>we(S),150);return()=>window.clearTimeout(t)},[S]);const{displayOptions:U}=De({options:e,query:he,userTyped:C.current,filterOption:R,searchBy:g,allowCreate:T,multiple:E,filterSelected:D,internalValue:_});f.useEffect(()=>{if(!x){if($.current){$.current=!1,k(null);return}if(T&&S.trim()){const t=S.trim(),a=e.find(d=>d.value===t||d.label===t);a&&!a.disabled?(r===void 0&&A(a.value),l?.(a.value,a,e)):(r===void 0&&A(t),l?.(t,void 0,e))}I(""),k(null)}},[x]),f.useEffect(()=>()=>{te.current&&window.clearTimeout(te.current)},[]);const X=Array.isArray(_)?e.find(t=>t.value===_[0]):e.find(t=>t.value===_),Z=Array.isArray(_)?_:[],z=h||s;function _e(){if(!z)if(x)O(!1);else{const t=L.current;if(t){const a=t.getBoundingClientRect().width;J(a)}O(!0),setTimeout(()=>{const a=L.current;a&&a.getBoundingClientRect().width},0)}}function H(t){const a=e.find(v=>v.value===t);if(a&&a.disabled)return;if(E===!0){const v=Array.isArray(_)?[..._]:[],j=v.indexOf(t);j>=0?v.splice(j,1):v.push(t),r===void 0&&A(v);const F=e.find(Ie=>Ie.value===t);l?.(v,F,e),I(""),$.current=!0,D&&O(!1);return}r===void 0&&A(t),l?.(t,a,e),y&&(C.current=!1),I(""),$.current=!0,O(!1)}const{onKeyDown:Te}=Pe({displayOptions:U,open:x,setOpen:O,handleSelectByValue:H,isDisabled:z,onBackspace:t=>{t.preventDefault(),ge({query:S,setQuery:I,options:e,setHighlighted:k})},onChar:t=>{t.preventDefault(),ye({key:t.key,query:S,setQuery:I,options:e,multiple:E,searchable:y,setHighlighted:k})}});f.useEffect(()=>{if(x&&V===null){const t=U,a=t.findIndex(v=>Array.isArray(_)?_.includes(v.value):v.value===_),d=t.findIndex(v=>!v.disabled);k(a>=0?a:d>=0?d:0)}x&&y&&setTimeout(()=>Y.current?.focus(),0)},[x]);const Re=U;function re(t,a){a?.stopPropagation();const d=Array.isArray(_)?[..._]:[],v=d.indexOf(t);v>=0&&d.splice(v,1),r===void 0&&A(d);const j=e.find(F=>F.value===t);l?.(d,j,e)}const xe=(t,a)=>{re(t,a)},qe=t=>{C.current=!0,I(t.target.value),k(0)},Ee=t=>{const a=t.target.value;if(!C.current&&!E&&y){let d=a.replace(S,"");d===""&&(d=a),C.current=!0,I(d),k(0);return}C.current=!0,I(a),k(0)},Ne=()=>{W(!0),!C.current&&y&&!E&&S&&setTimeout(()=>Y.current?.select(),0)},Se=t=>{if(t.stopPropagation(),$.current){$.current=!1,W(!1);return}const a=S.trim();if(T&&a){const d=e.find(v=>v.value===a||v.label===a);d&&!d.disabled?E?H(d.value):(r===void 0&&A(d.value),l?.(d.value,d,e)):E?H(a):(r===void 0&&A(a),l?.(a,void 0,e))}I(""),W(!1)},je=t=>{if(t.stopPropagation(),t.key==="ArrowDown")t.preventDefault(),k(a=>{const d=U,v=a===null?-1:a;for(let j=v+1;j<d.length;j++)if(!d[j].disabled)return j;return a});else if(t.key==="ArrowUp")t.preventDefault(),k(a=>{const d=U,v=a===null?d.length:a;for(let j=v-1;j>=0;j--)if(!d[j].disabled)return j;return a});else if(t.key==="Enter"){t.preventDefault();const a=S.trim();if(T&&a&&!e.find(F=>F.value===a||F.label===a)){H(a),I("");return}const v=U[V??0];v&&!v.disabled&&H(v.value)}else t.key==="Escape"&&O(!1)};return i.jsxs("div",{className:Fe(w,z,x,p),ref:fe,"aria-disabled":z,style:{...N,...Ue(q)},children:[i.jsxs("div",{role:"button",className:"beaver-select__control","aria-haspopup":"listbox","aria-expanded":x,onClick:_e,onKeyDown:Te,tabIndex:z?-1:0,...K,children:[i.jsx("div",{className:"beaver-select__display",children:y&&x?i.jsx(oe,{multiple:E,query:S,onChangeEvent:E?qe:Ee,searchRef:Y,onKeyDown:je,onFocus:Ne,onBlur:Se,placeholder:S?"":_&&!Array.isArray(_)?e.find(t=>t.value===_)?.label??String(_):n,selectedValues:Z,options:e,removeTag:xe,onMouseDown:t=>t.stopPropagation(),onClick:t=>t.stopPropagation()}):Array.isArray(_)?Z.length===0?i.jsx("span",{className:"beaver-select__value beaver-select__placeholder",children:n}):i.jsx(ce,{selectedValues:Z,options:e,onRemove:re}):i.jsx("span",{className:`beaver-select__value ${_??X?"":"beaver-select__placeholder"}`,children:_?e.find(t=>t.value===_)?.label??_:X?X.label:n})}),i.jsx(de,{loading:s,loadingIcon:b,icon:m})]}),x&&Me.createPortal(i.jsx("div",{ref:ne,style:{position:"fixed",left:`${G.x}px`,top:`${G.y}px`,visibility:G.measured?"visible":"hidden",pointerEvents:G.measured?void 0:"none",zIndex:"var(--beaver-select-z-index, 5000)",width:M?`${M}px`:"auto",boxSizing:"border-box",minWidth:M?`${M}px`:void 0},children:(()=>{const t=`${c?c+" ":""}beaver-select__menu--${w}`;return i.jsx(le,{menuOptions:Re,highlighted:V,internalValue:_,onHighlight:a=>k(a),onSelectByValue:a=>H(a),renderHighlightedLabel:a=>me(a,S),noDataLabel:Ke(e.length===0,y,C.current,S),listRef:ve,menuStyle:{width:M?`${M}px`:"auto",boxSizing:"border-box",minWidth:M?`${M}px`:void 0},menuClassName:t})})()}),document.body),E===!0?i.jsx("select",{name:o,multiple:!0,value:Array.isArray(_)?_:[],onChange:t=>{const a=Array.from(t.target.selectedOptions,v=>v.value);r===void 0&&A(a);const d=e.filter(v=>a.includes(v.value));l?.(a,d,e)},style:{display:"none"},"aria-hidden":!0,children:e.map(t=>i.jsx("option",{value:t.value,children:t.label},t.value))}):i.jsx("select",{name:o,value:(Array.isArray(_)?_[0]:_)??"",onChange:t=>{H(t.target.value)},style:{display:"none"},"aria-hidden":!0})]})});pe.displayName="Select";pe.__docgenInfo={description:"",methods:[],displayName:"Select",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},description:"下拉选项列表",defaultValue:{value:"[]",computed:!1}},placeholder:{required:!1,tsType:{name:"string"},description:"占位符",defaultValue:{value:"'请选择'",computed:!1}},value:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"单选时为 string，复选时为 string[]"},defaultValue:{required:!1,tsType:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},description:"默认值"},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: string | string[], option?: SelectOption | SelectOption[], optionList?: SelectOption[]) => void",signature:{arguments:[{type:{name:"union",raw:"string | string[]",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"}]},name:"value"},{type:{name:"union",raw:"SelectOption | SelectOption[]",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}},{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"}]},name:"option"},{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}}],raw:"SelectOption[]"},name:"optionList"}],return:{name:"void"}}},description:"事件回调，参数为 `(value, option, optionList)`：\n- `value`: 单选为 `string`，复选为 `string[]`\n- `option`: 单选时为 `SelectOption`，复选时为最近一次变更的 `SelectOption` 或 `SelectOption[]`（可选）\n- `optionList`: 当前完整的选项数组（可选）"},multiple:{required:!1,tsType:{name:"boolean"},description:"是否支持多选",defaultValue:{value:"false",computed:!1}},searchable:{required:!1,tsType:{name:"boolean"},description:"是否在下拉中显示搜索框",defaultValue:{value:"false",computed:!1}},allowCreate:{required:!1,tsType:{name:"boolean"},description:"是否允许在没有匹配项时创建自定义输入项（默认 false）",defaultValue:{value:"false",computed:!1}},filterOption:{required:!1,tsType:{name:"signature",type:"function",raw:"(input: string, option: SelectOption) => boolean",signature:{arguments:[{type:{name:"string"},name:"input"},{type:{name:"signature",type:"object",raw:`{
  label: string;
  value: string;
  disabled?: boolean;
}`,signature:{properties:[{key:"label",value:{name:"string",required:!0}},{key:"value",value:{name:"string",required:!0}},{key:"disabled",value:{name:"boolean",required:!1}}]}},name:"option"}],return:{name:"boolean"}}},description:"定制过滤函数：如果提供，将优先使用"},searchBy:{required:!1,tsType:{name:"union",raw:"'label' | 'value' | 'both'",elements:[{name:"literal",value:"'label'"},{name:"literal",value:"'value'"},{name:"literal",value:"'both'"}]},description:"搜索策略：'label' 只按 label 搜索，'value' 只按 value，'both' 按 label 与 value 搜索但优先 label 匹配",defaultValue:{value:"'both'",computed:!1}},filterSelected:{required:!1,tsType:{name:"boolean"},description:"仅在 `multiple` 为 true 时生效：在下拉中隐藏已选项，并在每次多选后关闭下拉。",defaultValue:{value:"false",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"是否禁用",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:"是否加载中",defaultValue:{value:"false",computed:!1}},icon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义箭头/后缀图标（传入 ReactNode）"},loadingIcon:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:"自定义 loading 图标（传入 ReactNode），优先于默认 spinner"},width:{required:!1,tsType:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}]},description:"直接设置组件宽度，支持 number(像素) 或 字符串(如 '50%','200px')"},size:{required:!1,tsType:{name:"union",raw:"'small' | 'medium' | 'large'",elements:[{name:"literal",value:"'small'"},{name:"literal",value:"'medium'"},{name:"literal",value:"'large'"}]},description:"组件尺寸",defaultValue:{value:"'medium'",computed:!1}},className:{required:!1,tsType:{name:"string"},description:"外层容器 className（可用于自定义触发器样式）"},menuClassName:{required:!1,tsType:{name:"string"},description:`下拉菜单的额外 className（菜单通过 portal 渲染到 body，
可用于在父组件上下文中添加特定样式，比如在分页中使用紧凑样式）`}}};export{pe as S};
